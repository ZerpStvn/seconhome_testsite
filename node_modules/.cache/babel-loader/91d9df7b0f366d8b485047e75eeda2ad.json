{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\src\\\\app\\\\pages\\\\admin\\\\partner\\\\communities\\\\edit-community.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getById as _getById, updateHome as _updateHome } from \"../../../../redux/actions/home-actions\";\nimport { useDispatch } from \"react-redux\";\nimport { Link, useParams, Redirect } from \"react-router-dom\";\nimport { notifyUser } from \"../../../../services/notification-service\";\nimport { List, Divider, Row, Col, Button, PageHeader, Breadcrumb, Tabs, Skeleton } from \"antd\";\nimport { compose } from \"redux\";\nimport { identity } from \"ramda\";\nimport EditCommunityProfile from \"./edit-community-profile\";\nimport EditCommunityPricing from \"./edit-community-pricing\";\nimport EditCommunityServicesAmenities from \"./edit-community-services-amenities\";\nimport ListRooms from \"./rooms/list-rooms\";\nimport ListStaff from \"./staff/list-staff\";\nimport Config from \"../../../../config\";\nimport EditCommunityPhotos from \"./edit-community-photos\";\nimport EditCommunityDocuments from \"./edit-community-documents\";\nimport UserService from \"../../../../services/user-service\";\nimport { faL } from \"@fortawesome/free-solid-svg-icons\";\nimport { humanize } from \"../../../../helpers/string-helper\";\nvar TabPane = Tabs.TabPane;\n\nvar EditCommunity = function EditCommunity(_ref) {\n  var editHome = _ref.editHome,\n      editHomeLoading = _ref.editHomeLoading,\n      history = _ref.history,\n      homeMessage = _ref.homeMessage,\n      homeUpdated = _ref.homeUpdated;\n  var user = UserService.getAdminUser();\n\n  var _useParams = useParams(),\n      id = _useParams.id,\n      activeKey = _useParams.activeKey;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      photoList = _useState2[0],\n      setPhotoList = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      documentList = _useState4[0],\n      setDocumentList = _useState4[1];\n\n  var _useState5 = useState(editHomeLoading),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      buttonLoading = _useState8[0],\n      setButtonLoading = _useState8[1];\n\n  var dispatch = useDispatch();\n\n  var handleSaveProfile = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id, values) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setButtonLoading(true);\n              _context.next = 3;\n              return dispatch(_updateHome(id, values));\n\n            case 3:\n              response = _context.sent;\n              // console.log(response);\n              notifyUser(\"Details have been saved\", \"success\");\n              setButtonLoading(false);\n              history.push(\"/admin/partners/communities/\" + id + \"/rooms\");\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSaveProfile(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleSavePrice = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id, values) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setButtonLoading(true);\n              _context2.next = 3;\n              return dispatch(_updateHome(id, values));\n\n            case 3:\n              response = _context2.sent;\n              // console.log(response);\n              history.push(\"/admin/partners/communities/\" + id + \"/services-amenities\");\n              notifyUser(\"Details have been saved\", \"success\");\n              setButtonLoading(false);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleSavePrice(_x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleSaveServices = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id, values) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setButtonLoading(true);\n              _context3.next = 3;\n              return dispatch(_updateHome(id, values));\n\n            case 3:\n              response = _context3.sent;\n              // console.log(response);\n              history.push(\"/admin/partners/communities/\" + id + \"/photos\");\n              notifyUser(\"Details have been saved\", \"success\");\n              setButtonLoading(false);\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleSaveServices(_x5, _x6) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleSaveFiles = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id, values) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setButtonLoading(true);\n              _context4.next = 3;\n              return dispatch(_updateHome(id, values));\n\n            case 3:\n              response = _context4.sent;\n              history.push(\"/admin/partners/communities/\" + id + \"/staff\");\n              notifyUser(\"Details have been saved\", \"success\");\n              setButtonLoading(false);\n\n            case 7:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleSaveFiles(_x7, _x8) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var handleSaveDocuments = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id, values) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              setButtonLoading(true);\n              _context5.next = 3;\n              return dispatch(_updateHome(id, values));\n\n            case 3:\n              response = _context5.sent;\n              // console.log(response);\n              history.push(\"/admin/partners/communities\");\n              notifyUser(\"Details have been saved\", \"success\");\n              setButtonLoading(false);\n\n            case 7:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function handleSaveDocuments(_x9, _x10) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (!editHome) {\n      dispatch(_getById(id, {\n        fields: \"*,photos.*,photos.directus_files_id.*,documents.*,documents.directus_files_id.*\"\n      }));\n    }\n\n    var _photoList = [];\n    var _docuentList = [];\n    editHome && editHome.photos.map(function (_ref7) {\n      var id = _ref7.id,\n          directus_files_id = _ref7.directus_files_id,\n          category = _ref7.category;\n\n      _photoList.push({\n        uid: directus_files_id.id,\n        id: id,\n        status: 'done',\n        url: \"\".concat(Config.API, \"/assets/\").concat(directus_files_id.id),\n        name: directus_files_id.filename_download,\n        category: category\n      });\n    });\n    setPhotoList(_photoList);\n    editHome && editHome.documents.map(function (_ref8) {\n      var id = _ref8.id,\n          directus_files_id = _ref8.directus_files_id,\n          category = _ref8.category;\n\n      _docuentList.push({\n        uid: directus_files_id.id,\n        id: id,\n        status: 'done',\n        url: \"\".concat(Config.API, \"/assets/\").concat(directus_files_id.id),\n        name: directus_files_id.filename_download,\n        category: category\n      });\n    });\n    setLoading(editHomeLoading);\n    setDocumentList(_docuentList);\n    return function () {\n      console.log(\"Edit Communities Unmounting\");\n    };\n  }, [editHomeLoading]);\n\n  var handleTabClick = function handleTabClick(key) {\n    history.push(\"/admin/partners/communities/\" + id + \"/\" + key);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Breadcrumb, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/partners\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, \"Partners\")), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/partner/overview\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 26\n    }\n  }, humanize(user.first_name), \" \", humanize(user.last_name))), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/partners/communities\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, \"Communities\")), editHome && /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"cap-letter\",\n    to: \"/admin/partners/communities/\".concat(id),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, \"\".concat(humanize(editHome.name))))), /*#__PURE__*/React.createElement(PageHeader, {\n    className: \"site-page-header cap-letter\",\n    title: editHome && \"\".concat(editHome.name),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Tabs, {\n    activeKey: activeKey ? activeKey : \"profile\",\n    onChange: handleTabClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"Profile\",\n    key: \"profile\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, console.log(loading, 'loading'), /*#__PURE__*/React.createElement(Skeleton, {\n    loading: loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, editHome && /*#__PURE__*/React.createElement(EditCommunityProfile, {\n    editHome: editHome,\n    handleSave: handleSaveProfile,\n    loading: buttonLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 26\n    }\n  }))), /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"Rooms\",\n    key: \"rooms\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ListRooms, {\n    homeId: id,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"Pricing\",\n    key: \"pricing\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Skeleton, {\n    loading: loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, editHome && /*#__PURE__*/React.createElement(EditCommunityPricing, {\n    editHome: editHome,\n    handleSave: handleSavePrice,\n    loading: buttonLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 26\n    }\n  }))), /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"Services & Amenities\",\n    key: \"services-amenities\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, editHome && /*#__PURE__*/React.createElement(EditCommunityServicesAmenities, {\n    editHome: editHome,\n    handleSave: handleSaveServices,\n    loading: buttonLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 24\n    }\n  })), /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"Media\",\n    key: \"photos\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, editHome && /*#__PURE__*/React.createElement(EditCommunityPhotos, {\n    photoList: photoList,\n    editHome: editHome,\n    handleSave: handleSaveFiles,\n    loading: buttonLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 24\n    }\n  })), /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"Staff\",\n    key: \"staff\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ListStaff, {\n    homeId: id,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(TabPane, {\n    tab: \"Documents\",\n    key: \"Documents\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, editHome && /*#__PURE__*/React.createElement(EditCommunityDocuments, {\n    documentList: documentList,\n    editHome: editHome,\n    handleSave: handleSaveDocuments,\n    loading: buttonLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 24\n    }\n  }))));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    editHome: state.home.editHome,\n    editHomeLoading: state.home.editHomeLoading,\n    homeMessage: state.home.homeMessage,\n    homeUpdated: state.home.homeUpdated\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getById: function getById() {\n      return dispatch(_getById());\n    },\n    updateHome: function updateHome() {\n      return dispatch(_updateHome());\n    }\n  };\n}\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(EditCommunity);","map":{"version":3,"sources":["C:/xampp/htdocs/wordpress/dashboard/src/app/pages/admin/partner/communities/edit-community.js"],"names":["React","useEffect","useState","connect","getById","updateHome","useDispatch","Link","useParams","Redirect","notifyUser","List","Divider","Row","Col","Button","PageHeader","Breadcrumb","Tabs","Skeleton","compose","identity","EditCommunityProfile","EditCommunityPricing","EditCommunityServicesAmenities","ListRooms","ListStaff","Config","EditCommunityPhotos","EditCommunityDocuments","UserService","faL","humanize","TabPane","EditCommunity","editHome","editHomeLoading","history","homeMessage","homeUpdated","user","getAdminUser","id","activeKey","photoList","setPhotoList","documentList","setDocumentList","loading","setLoading","buttonLoading","setButtonLoading","dispatch","handleSaveProfile","values","response","push","handleSavePrice","handleSaveServices","handleSaveFiles","handleSaveDocuments","fields","_photoList","_docuentList","photos","map","directus_files_id","category","uid","status","url","API","name","filename_download","documents","console","log","handleTabClick","key","first_name","last_name","mapStateToProps","state","home","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { getById, updateHome } from \"../../../../redux/actions/home-actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, useParams, Redirect } from \"react-router-dom\";\r\nimport { notifyUser } from \"../../../../services/notification-service\";\r\nimport { List, Divider, Row, Col, Button, PageHeader, Breadcrumb, Tabs, Skeleton } from \"antd\";\r\nimport { compose } from \"redux\";\r\nimport { identity } from \"ramda\";\r\nimport EditCommunityProfile from \"./edit-community-profile\";\r\nimport EditCommunityPricing from \"./edit-community-pricing\";\r\nimport EditCommunityServicesAmenities from \"./edit-community-services-amenities\";\r\nimport ListRooms from \"./rooms/list-rooms\";\r\nimport ListStaff from \"./staff/list-staff\";\r\nimport Config from \"../../../../config\";\r\nimport EditCommunityPhotos from \"./edit-community-photos\";\r\nimport EditCommunityDocuments from \"./edit-community-documents\";\r\nimport UserService from \"../../../../services/user-service\";\r\nimport { faL } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { humanize } from \"../../../../helpers/string-helper\";\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst EditCommunity = ({ editHome, editHomeLoading, history, homeMessage, homeUpdated }) => {\r\n  const user = UserService.getAdminUser();\r\n  const { id, activeKey } = useParams();\r\n  const [photoList, setPhotoList] = useState([]);\r\n  const [documentList, setDocumentList] = useState([]);\r\n  const [loading, setLoading] = useState(editHomeLoading);\r\n  const [buttonLoading, setButtonLoading] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSaveProfile = async (id, values) => {\r\n    setButtonLoading(true)\r\n    const response = await dispatch(updateHome(id, values))\r\n    // console.log(response);\r\n    notifyUser(\"Details have been saved\", \"success\")\r\n    setButtonLoading(false)\r\n    history.push(\"/admin/partners/communities/\" + id + \"/rooms\");\r\n  };\r\n\r\n  const handleSavePrice = async (id, values) => {\r\n    setButtonLoading(true)\r\n    const response = await dispatch(updateHome(id, values))\r\n    // console.log(response);\r\n\r\n    history.push(\"/admin/partners/communities/\" + id + \"/services-amenities\");\r\n    notifyUser(\"Details have been saved\", \"success\")\r\n    setButtonLoading(false)\r\n  }\r\n\r\n  const handleSaveServices = async (id, values) => {\r\n    setButtonLoading(true)\r\n    const response = await dispatch(updateHome(id, values))\r\n    // console.log(response);\r\n    history.push(\"/admin/partners/communities/\" + id + \"/photos\");\r\n    notifyUser(\"Details have been saved\", \"success\");\r\n    setButtonLoading(false)\r\n\r\n  };\r\n\r\n  const handleSaveFiles = async (id, values) => {\r\n    setButtonLoading(true)\r\n    const response = await dispatch(updateHome(id, values))\r\n\r\n    history.push(\"/admin/partners/communities/\" + id + \"/staff\");\r\n    notifyUser(\"Details have been saved\", \"success\");\r\n    setButtonLoading(false)\r\n  };\r\n  const handleSaveDocuments = async (id, values) => {\r\n    setButtonLoading(true)\r\n    const response = await dispatch(updateHome(id, values))\r\n    // console.log(response);\r\n    history.push(\"/admin/partners/communities\");\r\n    notifyUser(\"Details have been saved\", \"success\");\r\n    setButtonLoading(false)\r\n\r\n  };\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (!editHome) {\r\n      dispatch(getById(id, { fields: \"*,photos.*,photos.directus_files_id.*,documents.*,documents.directus_files_id.*\" }));\r\n    }\r\n    let _photoList = [];\r\n    let _docuentList = [];\r\n    editHome && editHome.photos.map(({ id, directus_files_id, category }) => {\r\n      _photoList.push({\r\n        uid: directus_files_id.id,\r\n        id: id,\r\n        status: 'done',\r\n        url: `${Config.API}/assets/${directus_files_id.id}`,\r\n        name: directus_files_id.filename_download,\r\n        category: category\r\n      })\r\n    })\r\n    setPhotoList(_photoList);\r\n    editHome && editHome.documents.map(({ id, directus_files_id, category }) => {\r\n      _docuentList.push({\r\n        uid: directus_files_id.id,\r\n        id: id,\r\n        status: 'done',\r\n        url: `${Config.API}/assets/${directus_files_id.id}`,\r\n        name: directus_files_id.filename_download,\r\n        category: category\r\n      })\r\n    })\r\n    setLoading(editHomeLoading)\r\n    setDocumentList(_docuentList);\r\n    return () => {\r\n      console.log(\"Edit Communities Unmounting\");\r\n    };\r\n\r\n  }, [editHomeLoading]);\r\n\r\n  const handleTabClick = (key) => {\r\n    history.push(\"/admin/partners/communities/\" + id + \"/\" + key);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Breadcrumb>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/admin/partners\">Partners</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item><Link to=\"/admin/partner/overview\">{humanize(user.first_name)} {humanize(user.last_name)}</Link></Breadcrumb.Item>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/admin/partners/communities\">Communities</Link>\r\n        </Breadcrumb.Item>\r\n        {editHome && (\r\n          <Breadcrumb.Item>\r\n            <Link className=\"cap-letter\" to={`/admin/partners/communities/${id}`}>{`${humanize(editHome.name)}`}</Link>\r\n          </Breadcrumb.Item>\r\n        )}\r\n      </Breadcrumb>\r\n      <PageHeader className=\"site-page-header cap-letter\" title={editHome && `${editHome.name}`} />\r\n      <Tabs activeKey={activeKey ? activeKey : \"profile\"} onChange={handleTabClick}>\r\n        <TabPane tab=\"Profile\" key=\"profile\">\r\n          {console.log(loading, 'loading')}\r\n          <Skeleton loading={loading}>\r\n            {editHome && <EditCommunityProfile editHome={editHome} handleSave={handleSaveProfile} loading={buttonLoading} />}\r\n          </Skeleton>\r\n\r\n        </TabPane>\r\n        <TabPane tab=\"Rooms\" key=\"rooms\">\r\n          <ListRooms homeId={id} />\r\n        </TabPane>\r\n\r\n        <TabPane tab=\"Pricing\" key=\"pricing\">\r\n          <Skeleton loading={loading}>\r\n            {editHome && <EditCommunityPricing editHome={editHome} handleSave={handleSavePrice} loading={buttonLoading} />}\r\n          </Skeleton>\r\n        </TabPane>\r\n        <TabPane tab=\"Services & Amenities\" key=\"services-amenities\">\r\n          {editHome && <EditCommunityServicesAmenities editHome={editHome} handleSave={handleSaveServices} loading={buttonLoading} />}\r\n        </TabPane>\r\n        <TabPane tab=\"Media\" key=\"photos\">\r\n          {editHome && <EditCommunityPhotos photoList={photoList} editHome={editHome} handleSave={handleSaveFiles} loading={buttonLoading} />}\r\n        </TabPane>\r\n        <TabPane tab=\"Staff\" key=\"staff\">\r\n          <ListStaff homeId={id} />\r\n        </TabPane>\r\n        <TabPane tab=\"Documents\" key=\"Documents\">\r\n          {editHome && <EditCommunityDocuments documentList={documentList} editHome={editHome} handleSave={handleSaveDocuments} loading={buttonLoading} />}\r\n        </TabPane>\r\n\r\n      </Tabs>\r\n    </>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    editHome: state.home.editHome,\r\n    editHomeLoading: state.home.editHomeLoading,\r\n    homeMessage: state.home.homeMessage,\r\n    homeUpdated: state.home.homeUpdated\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    getById: () => dispatch(getById()),\r\n    updateHome: () => dispatch(updateHome()),\r\n  };\r\n}\r\n\r\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(EditCommunity);\r\n"]},"metadata":{},"sourceType":"module"}