{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\SFelizardo\\\\Downloads\\\\secondhome\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\SFelizardo\\\\Downloads\\\\secondhome\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\SFelizardo\\\\Downloads\\\\secondhome\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\SFelizardo\\\\Downloads\\\\secondhome\\\\src\\\\app\\\\pages\\\\admin\\\\partner\\\\partner-admin.js\";\n\nimport { Space, Input, Button, Card, Row, Col, Spin, List, Avatar, Popconfirm, message } from \"antd\";\nimport Icon from \"@ant-design/icons\";\nimport { EyeSvg } from \"../../../components/shared/svg/eye\";\nimport { DeleteOutlined } from '@ant-design/icons';\nimport { PenSvg } from \"../../../components/shared/svg/pen\";\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { signin as _signin } from \"../../../redux/actions/auth-actions\";\nimport { useDispatch } from \"react-redux\";\nimport { notifyUser } from \"../../../services/notification-service\";\nimport { humanize } from \"../../../helpers/string-helper\";\nimport userApi from \"../../../redux/api/user-api\";\nimport homeApi from \"../../../redux/api/home-api\";\nimport userService from \"../../../services/user-service\";\n\nvar EyeIcon = function EyeIcon(props) {\n  return /*#__PURE__*/React.createElement(Icon, Object.assign({\n    component: EyeSvg\n  }, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 28\n    }\n  }));\n};\n\nvar PenIcon = function PenIcon(props) {\n  return /*#__PURE__*/React.createElement(Icon, Object.assign({\n    component: PenSvg\n  }, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 28\n    }\n  }));\n};\n\nvar Dashboard = function Dashboard(_ref) {\n  var history = _ref.history;\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      submitted = _useState2[0],\n      setSubmitted = _useState2[1];\n\n  var _useState3 = useState(3),\n      _useState4 = _slicedToArray(_useState3, 2),\n      numOfTestimonials = _useState4[0],\n      setnNumOfTestimonials = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      filteredPartnerList = _useState6[0],\n      setFilteredPartnerList = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      partnerList = _useState8[0],\n      setPartnerList = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      partnerListLoading = _useState10[0],\n      setPartnerListLoading = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      totalCount = _useState12[0],\n      setTotalCount = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      totalPropertyCount = _useState14[0],\n      setTotalPropertyCount = _useState14[1];\n\n  var updateMedia = function updateMedia() {\n    var num = window.innerWidth > 1199 ? 3 : window.innerWidth < 1199 && window.innerWidth > 767 ? 2 : 1;\n    setnNumOfTestimonials(num);\n  };\n\n  useEffect(function () {\n    window.addEventListener(\"resize\", updateMedia);\n    partnerListLoading && getPartners();\n    return function () {\n      return window.removeEventListener(\"resize\", updateMedia);\n    };\n  }, [partnerListLoading]);\n\n  var getPartners = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var partners, homeData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return userApi.loadAllUsers({\n                meta: 'filter_count',\n                limit: -1,\n                filter: {\n                  role: {\n                    _eq: \"8091cbf7-fafb-4255-b1be-42a2e1a6d436\"\n                  }\n                }\n              });\n\n            case 2:\n              partners = _context.sent;\n              console.log(partners, \"partnerspartnerspartnerspartners\");\n\n              if (!partners.data) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 7;\n              return homeApi.listAll({\n                meta: 'filter_count',\n                limit: 1,\n                filter: {\n                  status: {\n                    _eq: 'published'\n                  }\n                }\n              });\n\n            case 7:\n              homeData = _context.sent;\n              setPartnerList(partners.data);\n              setFilteredPartnerList(partners.data);\n              setPartnerListLoading(false);\n              setTotalCount(partners.meta.filter_count);\n\n              if (homeData.meta) {\n                setTotalPropertyCount(homeData.meta.filter_count);\n              }\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getPartners() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var setAdminUser = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(partner) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!partner) {\n                _context2.next = 4;\n                break;\n              }\n\n              _context2.next = 3;\n              return userService.setAdminUser(partner);\n\n            case 3:\n              history.push(\"/admin/partner/overview\");\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function setAdminUser(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var editPartnerUser = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(partner) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!partner) {\n                _context3.next = 4;\n                break;\n              }\n\n              _context3.next = 3;\n              return userService.setAdminUser(partner);\n\n            case 3:\n              history.push(\"/admin/partner/edit\");\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function editPartnerUser(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var deletePartner = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(Id) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return userApi.deleteUser(Id);\n\n            case 2:\n              setPartnerListLoading(true);\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function deletePartner(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var searchPartner = function searchPartner(e) {\n    var filteredPartnertList = partnerList.filter(function (item) {\n      if (item.first_name.toLowerCase().includes(e.target.value.toLowerCase())) {\n        return item;\n      }\n\n      if (item.last_name.toLowerCase().includes(e.target.value.toLowerCase())) {\n        return item;\n      }\n\n      if (item.email.toLowerCase().includes(e.target.value.toLowerCase())) {\n        return item;\n      }\n    });\n    setFilteredPartnerList(filteredPartnertList);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"admin-dashboard\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Spin, {\n    spinning: partnerListLoading,\n    size: \"large\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: {\n      xs: 8,\n      sm: 16,\n      md: 24,\n      lg: 32\n    },\n    className: \"admin-countbox\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    lg: 24,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Space, {\n    className: \"btn-group-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    href: '/dashboard/admin/partner/add',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }, \"Add Partner\"))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 12,\n    lg: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"countbox\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"count\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }, totalCount), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, \"Total Partners\"))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 12,\n    lg: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"countbox green-countbox\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"count\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  }, totalPropertyCount), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, \"Listed Property\")))), /*#__PURE__*/React.createElement(Row, {\n    gutter: {\n      xs: 8,\n      sm: 16,\n      md: 24,\n      lg: 32\n    },\n    className: \"dashboard-listings\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    span: 24,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    title: \"Total Partners\",\n    extra: /*#__PURE__*/React.createElement(Input, {\n      placeholder: \"Search by name or email\",\n      onChange: searchPartner,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 29\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    itemLayout: \"horizontal\",\n    dataSource: filteredPartnerList,\n    pagination: {\n      onChange: function onChange(page) {\n        console.log(page);\n      },\n      pageSize: 6\n    },\n    renderItem: function renderItem(item) {\n      return /*#__PURE__*/React.createElement(List.Item, {\n        actions: [/*#__PURE__*/React.createElement(\"a\", {\n          className: \"list-edit\",\n          onClick: function onClick() {\n            return editPartnerUser(item);\n          },\n          key: \"list-edit\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 51\n          }\n        }, /*#__PURE__*/React.createElement(PenIcon, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 130\n          }\n        })), /*#__PURE__*/React.createElement(\"a\", {\n          className: \"list-view\",\n          key: \"list-view\",\n          onClick: function onClick() {\n            return setAdminUser(item);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 147\n          }\n        }, /*#__PURE__*/React.createElement(EyeIcon, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 223\n          }\n        })), /*#__PURE__*/React.createElement(\"a\", {\n          className: \"list-view\",\n          key: \"list-view\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 240\n          }\n        }, /*#__PURE__*/React.createElement(Popconfirm, {\n          onConfirm: function onConfirm() {\n            return deletePartner(item.id);\n          },\n          title: \"Are you sure you want to delete the partner?\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 282\n          }\n        }, \" \", /*#__PURE__*/React.createElement(DeleteOutlined, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 389\n          }\n        })))],\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(List.Item.Meta, {\n        avatar: /*#__PURE__*/React.createElement(Avatar, {\n          src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 53\n          }\n        }),\n        title: /*#__PURE__*/React.createElement(\"a\", {\n          onClick: function onClick() {\n            return setAdminUser(item);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 52\n          }\n        }, \"\".concat(humanize(item.first_name), \" \").concat(humanize(item.last_name))),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 41\n        }\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }))))));\n};\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    signin: function signin(email, password) {\n      return dispatch(_signin(email, password));\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);","map":{"version":3,"sources":["C:/Users/SFelizardo/Downloads/secondhome/src/app/pages/admin/partner/partner-admin.js"],"names":["Space","Input","Button","Card","Row","Col","Spin","List","Avatar","Popconfirm","message","Icon","EyeSvg","DeleteOutlined","PenSvg","React","useState","useEffect","connect","signin","useDispatch","notifyUser","humanize","userApi","homeApi","userService","EyeIcon","props","PenIcon","Dashboard","history","dispatch","submitted","setSubmitted","numOfTestimonials","setnNumOfTestimonials","filteredPartnerList","setFilteredPartnerList","partnerList","setPartnerList","partnerListLoading","setPartnerListLoading","totalCount","setTotalCount","totalPropertyCount","setTotalPropertyCount","updateMedia","num","window","innerWidth","addEventListener","getPartners","removeEventListener","loadAllUsers","meta","limit","filter","role","_eq","partners","console","log","data","listAll","status","homeData","filter_count","setAdminUser","partner","push","editPartnerUser","deletePartner","Id","deleteUser","searchPartner","e","filteredPartnertList","item","first_name","toLowerCase","includes","target","value","last_name","email","xs","sm","md","lg","onChange","page","pageSize","id","mapStateToProps","state","mapDispatchToProps","password"],"mappings":"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","sourcesContent":["import { Space, Input, Button, Card, Row, Col, Spin, List, Avatar, Popconfirm, message } from \"antd\";\r\nimport Icon from \"@ant-design/icons\";\r\nimport { EyeSvg } from \"../../../components/shared/svg/eye\";\r\nimport { DeleteOutlined } from '@ant-design/icons';\r\nimport { PenSvg } from \"../../../components/shared/svg/pen\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { signin } from \"../../../redux/actions/auth-actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { notifyUser } from \"../../../services/notification-service\";\r\nimport { humanize } from \"../../../helpers/string-helper\";\r\nimport userApi from \"../../../redux/api/user-api\";\r\nimport homeApi from \"../../../redux/api/home-api\";\r\nimport userService from \"../../../services/user-service\";\r\n\r\nconst EyeIcon = (props) => <Icon component={EyeSvg} {...props} />;\r\nconst PenIcon = (props) => <Icon component={PenSvg} {...props} />;\r\n\r\nconst Dashboard = ({ history }) => {\r\n    const dispatch = useDispatch();\r\n    const [submitted, setSubmitted] = useState(false);\r\n    const [numOfTestimonials, setnNumOfTestimonials] = useState(3);\r\n    const [filteredPartnerList, setFilteredPartnerList] = useState([]);\r\n    const [partnerList, setPartnerList] = useState([]);\r\n    const [partnerListLoading, setPartnerListLoading] = useState(true);\r\n    const [totalCount, setTotalCount] = useState(0);\r\n    const [totalPropertyCount, setTotalPropertyCount] = useState(0);\r\n\r\n    const updateMedia = () => {\r\n        var num = window.innerWidth > 1199 ? 3 : (window.innerWidth < 1199 && window.innerWidth > 767) ? 2 : 1\r\n        setnNumOfTestimonials(num);\r\n    };\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", updateMedia);\r\n        partnerListLoading && getPartners();\r\n        return () => window.removeEventListener(\"resize\", updateMedia);\r\n    }, [partnerListLoading]);\r\n\r\n    const getPartners = async () => {\r\n        const partners = await userApi.loadAllUsers({ meta: 'filter_count', limit: -1, filter: { role: { _eq: \"8091cbf7-fafb-4255-b1be-42a2e1a6d436\" } } })\r\n        console.log(partners, \"partnerspartnerspartnerspartners\");\r\n        if (partners.data) {\r\n            const homeData = await homeApi.listAll({ meta: 'filter_count', limit: 1, filter: { status: { _eq: 'published' } } });\r\n\r\n            setPartnerList(partners.data);\r\n            setFilteredPartnerList(partners.data);\r\n            setPartnerListLoading(false);\r\n            setTotalCount(partners.meta.filter_count)\r\n            if (homeData.meta) {\r\n                setTotalPropertyCount(homeData.meta.filter_count)\r\n            }\r\n        }\r\n    }\r\n\r\n    const setAdminUser = async (partner) => {\r\n        if (partner) {\r\n            await userService.setAdminUser(partner);\r\n            history.push(`/admin/partner/overview`);\r\n        }\r\n    }\r\n    const editPartnerUser = async (partner) => {\r\n        if (partner) {\r\n            await userService.setAdminUser(partner);\r\n            history.push(`/admin/partner/edit`);\r\n        }\r\n    }\r\n\r\n    const deletePartner = async (Id) => {\r\n        await userApi.deleteUser(Id)\r\n        setPartnerListLoading(true);\r\n    }\r\n    const searchPartner = (e) => {\r\n        let filteredPartnertList = partnerList.filter(item => {\r\n            if (item.first_name.toLowerCase().includes(e.target.value.toLowerCase())) {\r\n                return item\r\n            }\r\n            if (item.last_name.toLowerCase().includes(e.target.value.toLowerCase())) {\r\n                return item\r\n            }\r\n            if (item.email.toLowerCase().includes(e.target.value.toLowerCase())) {\r\n                return item\r\n            }\r\n\r\n        });\r\n        setFilteredPartnerList(filteredPartnertList);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"admin-dashboard\">\r\n            {/* <Space className=\"btn-group-right\">\r\n                <Button href={'/admin/partner/add'}>Add Partner</Button>\r\n            </Space> */}\r\n            <Spin spinning={partnerListLoading} size=\"large\">\r\n                <Row gutter={{ xs: 8, sm: 16, md: 24, lg: 32 }} className=\"admin-countbox\">\r\n                    <Col xs={24} sm={24} lg={24}>\r\n                        <Space className=\"btn-group-right\">\r\n                            <Button href={'/dashboard/admin/partner/add'}>Add Partner</Button>\r\n                        </Space>\r\n                    </Col>\r\n                    <Col xs={24} sm={12} lg={8}>\r\n                        <div className=\"countbox\">\r\n                            <span className=\"count\">{totalCount}</span>\r\n                            <p>Total Partners</p>\r\n                        </div>\r\n                    </Col>\r\n                    <Col xs={24} sm={12} lg={8}>\r\n                        <div className=\"countbox green-countbox\">\r\n                            <span className=\"count\">{totalPropertyCount}</span>\r\n                            <p>Listed Property</p>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n                <Row gutter={{ xs: 8, sm: 16, md: 24, lg: 32 }} className=\"dashboard-listings\">\r\n                    <Col span={24}>\r\n                        <Card title=\"Total Partners\" extra={\r\n                            <Input placeholder=\"Search by name or email\" onChange={searchPartner} />\r\n                        }>\r\n                            <List\r\n                                itemLayout=\"horizontal\"\r\n                                dataSource={filteredPartnerList}\r\n                                pagination={{\r\n                                    onChange: page => {\r\n                                        console.log(page);\r\n                                    },\r\n                                    pageSize: 6,\r\n                                }}\r\n                                renderItem={item => (\r\n\r\n                                    <List.Item\r\n                                        actions={[<a className=\"list-edit\" onClick={() => editPartnerUser(item)} key=\"list-edit\"><PenIcon /></a>, <a className=\"list-view\" key=\"list-view\" onClick={() => setAdminUser(item)}><EyeIcon /></a>, <a className=\"list-view\" key=\"list-view\" ><Popconfirm onConfirm={() => deletePartner(item.id)} title=\"Are you sure you want to delete the partner?\"> <DeleteOutlined /></Popconfirm></a>]}\r\n                                    >\r\n                                        <List.Item.Meta\r\n                                            avatar={<Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />}\r\n                                            title={<a onClick={() => setAdminUser(item)}>{`${humanize(item.first_name)} ${humanize(item.last_name)}`}</a>}\r\n\r\n                                        />\r\n                                    </List.Item>\r\n                                )}\r\n                            />\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </Spin>\r\n        </div>\r\n    );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        signin: (email, password) => dispatch(signin(email, password)),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\r\n"]},"metadata":{},"sourceType":"module"}