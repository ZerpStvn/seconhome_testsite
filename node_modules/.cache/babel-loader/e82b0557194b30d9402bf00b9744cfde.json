{"ast":null,"code":"import _objectSpread from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\src\\\\app\\\\pages\\\\home-owner\\\\leads\\\\list-leads.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { listAllLeads as _listAllLeads, updateLead as _updateLead, setLeadListLoading as _setLeadListLoading } from \"../../../redux/actions/lead-actions\";\nimport { useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { notifyUser } from \"../../../services/notification-service\";\nimport { Row, Col, Table, Space, Breadcrumb, Tooltip } from \"antd\";\nimport { compose } from \"redux\";\nimport { FilterFilled } from '@ant-design/icons';\nimport { leadApprovalOptions, leadStatusOptions, residentMoveTimeFrameOptions } from \"../../../constants/defaultValues\";\nimport { getColumnSearchProps } from \"../../../helpers/columnSearchProps\";\nimport moment from \"moment\";\nimport LeadApproval from \"./lead-approval\";\n\nvar ListCommunities = function ListCommunities(_ref) {\n  var leadList = _ref.leadList,\n      leadListLoading = _ref.leadListLoading,\n      leadMessage = _ref.leadMessage,\n      leadUpdated = _ref.leadUpdated,\n      leadListMeta = _ref.leadListMeta;\n\n  var _useState = useState({\n    pageSize: 5,\n    current: 1\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      pagination = _useState2[0],\n      setPagination = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sort = _useState4[0],\n      setSort = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      filters = _useState6[0],\n      setFilters = _useState6[1];\n\n  var dispatch = useDispatch();\n\n  var handelApprovalChange = function handelApprovalChange(values, leadId) {\n    dispatch(_updateLead(leadId, values));\n  };\n\n  useEffect(function () {\n    leadListLoading && dispatch(_listAllLeads({\n      fields: ['*', \"client.*\", \"client.primary_resident.*\", \"client.second_resident.*\", \"home.*\"],\n      filter: filters,\n      sort: sort,\n      page: pagination.current,\n      limit: pagination.pageSize,\n      meta: \"*\"\n    }));\n    leadListMeta && setPagination(_objectSpread({}, pagination, {\n      total: leadListMeta.filter_count\n    }));\n\n    if (leadUpdated) {\n      notifyUser(leadMessage, \"success\");\n    }\n\n    dispatch({\n      type: 'RESET'\n    });\n    return function () {\n      console.log(\"Communities Unmounting\");\n    };\n  }, [leadUpdated, leadMessage, leadListLoading]);\n\n  var handelTableChange = function handelTableChange(_ref2, tableFilters, sorter) {\n    var current = _ref2.current;\n\n    if (sorter && sorter.field) {\n      if (sorter.order == \"ascend\") {\n        setSort(sorter.field);\n      } else {\n        setSort(\"-\" + sorter.field);\n      }\n    }\n\n    var _filters = {};\n    Object.entries(tableFilters).forEach(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          key = _ref4[0],\n          value = _ref4[1];\n\n      var orFilter = [];\n\n      if (value) {\n        switch (key) {\n          case \"approval\":\n            _filters.approval = {\n              _in: value\n            };\n            break;\n\n          case \"status\":\n            _filters.status = {\n              _in: value\n            };\n            break;\n\n          case \"budget\":\n            orFilter = [];\n            value.map(function (data) {\n              orFilter.push({\n                budget: {\n                  _eq: data\n                }\n              });\n            });\n            _filters._or = orFilter;\n            break;\n\n          case \"client_name\":\n            orFilter = [];\n            value.map(function (data) {\n              orFilter.push({\n                clients: {\n                  name: {\n                    _contains: data\n                  }\n                }\n              });\n            });\n            _filters._or = orFilter;\n            break;\n\n          case \"resident_name\":\n            orFilter = [];\n            value.map(function (data) {\n              orFilter.push({\n                residents: {\n                  name: {\n                    _contains: data\n                  }\n                }\n              });\n            });\n            _filters._or = orFilter;\n            break;\n\n          default:\n            break;\n        }\n      } else {}\n    });\n    setFilters(_objectSpread({}, _filters));\n    setPagination(_objectSpread({}, pagination, {\n      current: current\n    }));\n    dispatch(_setLeadListLoading(true));\n  };\n\n  var getTimeFrameValue = function getTimeFrameValue(client) {\n    var timeFrameValue = \"\";\n\n    if (client) {\n      if (client.primary_resident) {\n        residentMoveTimeFrameOptions.forEach(function (Item) {\n          if (Item.value == client.primary_resident.move_time_frame) {\n            timeFrameValue = Item.text;\n          }\n        });\n      }\n\n      if (client.second_resident) {\n        residentMoveTimeFrameOptions.forEach(function (Item) {\n          if (Item.value == client.second_resident.move_time_frame) {\n            timeFrameValue = Item.text;\n          }\n        });\n      }\n    }\n\n    return timeFrameValue;\n  };\n\n  var columns = [{\n    title: 'Client Name',\n    dataIndex: 'client_name',\n    key: 'client_name',\n    //...getColumnSearchProps(\"client_name\"),\n    render: function render(text, lead) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/owner/leads/\".concat(lead.key),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      }, text));\n    }\n  }, {\n    title: 'Resident Name',\n    dataIndex: 'resident_name',\n    key: 'resident_name',\n    // ...getColumnSearchProps(\"resident_name\"),\n    render: function render(text, lead) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/owner/leads/\".concat(lead.key, \"/resident\"),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }\n      }, text));\n    }\n  }, {\n    title: 'Second Resident Name',\n    dataIndex: 'second_resident_name',\n    key: 'resident_name',\n    // ...getColumnSearchProps(\"resident_name\"),\n    render: function render(text, lead) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/owner/leads/\".concat(lead.key, \"/resident\"),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }\n      }, text));\n    }\n  }, {\n    title: 'Community',\n    dataIndex: 'home_name',\n    key: 'home_name',\n    //...getColumnSearchProps(\"home_name\"),\n    render: function render(text, lead) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/owner/communities/\".concat(lead.home_id),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }\n      }, text));\n    }\n  }, {\n    title: 'Date Sent',\n    dataIndex: 'date_created',\n    key: 'date_created',\n    //sorter: true,\n    sortDirections: ['ascend', 'descend', 'ascend'],\n    render: function render(text) {\n      var date = new Date(text);\n      var year = date.getFullYear();\n      var month = (1 + date.getMonth()).toString();\n      month = month.length > 1 ? month : '0' + month;\n      var day = date.getDate().toString();\n      day = day.length > 1 ? day : '0' + day;\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }\n      }, \"\".concat(month, \"/\").concat(day, \"/\").concat(year));\n    }\n  }, {\n    title: 'Time Sent',\n    dataIndex: 'time_sent',\n    key: 'time_sent',\n    //sorter: false,\n    sortDirections: ['ascend', 'descend', 'ascend'],\n    render: function render(text) {\n      var date = new Date(text);\n      var year = date.getFullYear();\n      var month = (1 + date.getMonth()).toString();\n      month = month.length > 1 ? month : '0' + month;\n      var day = date.getDate().toString();\n      day = day.length > 1 ? day : '0' + day;\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }\n      }, moment(text).format('LT'));\n    }\n  }, // {\n  //   title: 'Budget',\n  //   dataIndex: 'budget',\n  //   key: 'budget',\n  //   sorter: true,\n  //   sortDirections: ['ascend', 'descend', 'ascend'],\n  //   ...getColumnSearchProps(\"budget\"),\n  //   render: (text) => (\n  //     <Space size=\"middle\">\n  //       {`$${text !== null ? text : '0'}`}\n  //     </Space>\n  //   )\n  // },\n  {\n    title: 'Budget Notes',\n    dataIndex: 'budget_notes',\n    key: 'budget_notes',\n    render: function render(text) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 9\n        }\n      }, text && text);\n    }\n  }, {\n    title: 'Approval',\n    dataIndex: 'approval',\n    key: 'approval',\n    style: {\n      width: \"130px\"\n    },\n    //sorter: true,\n    sortDirections: ['ascend', 'descend', 'ascend'],\n    //filters: leadApprovalOptions,\n    //filterIcon: (<Tooltip title=\"Filter\"><FilterFilled /></Tooltip>),\n    render: function render(value, lead) {\n      return /*#__PURE__*/React.createElement(LeadApproval, {\n        value: value,\n        lead: lead,\n        handelApprovalChange: handelApprovalChange,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 16\n        }\n      });\n      /*const [form] = Form.useForm();\r\n      const [approval, setApproval] = useState(value);\r\n      const [deniedRreason, setDeniedReason] = useState(lead.denied_reason);\r\n      const handelSubmit = (values) => {\r\n        if (!values.denied_reason) {\r\n          values.denied_reason = null;\r\n        }\r\n        handelApprovalChange(values, lead.key)\r\n      }\r\n      const overlay = (\r\n        <Form key={lead.key} form={form} layout={\"vertical\"} initialValues={lead} onFinish={handelSubmit} >\r\n          <Form.Item label=\"Approval\" name=\"approval\">\r\n            <Select style={{ width: \"180px\" }} onChange={setApproval}>\r\n              {leadApprovalOptions.map((option) => {\r\n                return (<Select.Option value={option.value}>{option.text}</Select.Option>)\r\n              })}\r\n            </Select>\r\n          </Form.Item>\r\n          {(approval == \"denied_other\") &&\r\n            <Form.Item label=\"Reason\" name=\"denied_reason\">\r\n              <TextArea onChange={(e) => { setDeniedReason(e.target.value) }} />\r\n            </Form.Item>\r\n          }\r\n            <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\"> Save </Button>\r\n          </Form.Item>\r\n          </Form>\r\n      );\r\n      return (\r\n        <Popover placement=\"bottomLeft\" content={overlay} trigger=\"click\">\r\n          <Tag>\r\n            <a onClick={e => e.preventDefault()}>\r\n              {humanize(value)} <DownOutlined />\r\n            </a>\r\n            </Tag>\r\n        </Popover>\r\n      )*/\n    }\n  }, {\n    title: 'Move Time Frame',\n    dataIndex: 'move_time_frame',\n    key: 'move_time_frame',\n    //sorter: true,\n    sortDirections: ['ascend', 'descend', 'ascend'],\n    // filters: leadStatusOptions,\n    // filterIcon: (<Tooltip title=\"Filter\"><FilterFilled /></Tooltip>),\n    render: function render(text) {\n      return /*#__PURE__*/React.createElement(Space, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 9\n        }\n      }, getTimeFrameValue(text));\n    }\n  } // {\n  //   title: 'Status',\n  //   dataIndex: 'status',\n  //   key: 'status',\n  //   sorter: true,\n  //   sortDirections: ['ascend', 'descend', 'ascend'],\n  //   filters: leadStatusOptions,\n  //   filterIcon: (<Tooltip title=\"Filter\"><FilterFilled /></Tooltip>),\n  //   render: (text) => (\n  //     <Space >\n  //       {humanize(text)}\n  //     </Space>\n  //   )\n  // },\n  ];\n\n  var getBudgetNotesValue = function getBudgetNotesValue(editLead) {\n    var budgetNotesValue = \"\";\n\n    if (editLead) {\n      if (editLead.primary_resident) {\n        budgetNotesValue = editLead.primary_resident.budget_notes;\n      } else if (editLead.second_resident) {\n        budgetNotesValue = editLead.second_resident.budget_notes;\n      } else {\n        budgetNotesValue = \"\";\n      }\n    }\n\n    return budgetNotesValue;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Breadcrumb, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 11\n    }\n  }, \"Home\")), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/leads\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 11\n    }\n  }, \"Leads\"))), /*#__PURE__*/React.createElement(Row, {\n    gutter: 30,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 24,\n    lg: 24,\n    xl: 24,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    columns: columns,\n    loading: leadListLoading,\n    dataSource: leadList.map(function (_ref5) {\n      var client = _ref5.client,\n          budget = _ref5.budget,\n          budget_notes = _ref5.budget_notes,\n          approval = _ref5.approval,\n          status = _ref5.status,\n          id = _ref5.id,\n          denied_reason = _ref5.denied_reason,\n          date_created = _ref5.date_created,\n          home = _ref5.home;\n      console.log(client, 'client');\n      return {\n        client_name: client ? client.name : \"\",\n        resident_name: client && client.primary_resident ? client.primary_resident.name : \"\",\n        second_resident_name: client && client.second_resident ? client.second_resident.name : \"\",\n        budget: budget,\n        budget_notes: getBudgetNotesValue(client),\n        approval: approval,\n        key: id,\n        denied_reason: denied_reason,\n        date_created: date_created,\n        home_name: home && home.name,\n        home_id: home.id,\n        time_sent: date_created,\n        move_time_frame: client\n      };\n    }),\n    pagination: pagination,\n    onChange: handelTableChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 11\n    }\n  }))));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    leadList: state.lead.leadList,\n    leadListLoading: state.lead.leadListLoading,\n    leadListMeta: state.lead.leadListMeta\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    listAllLeads: function listAllLeads() {\n      return dispatch(_listAllLeads());\n    },\n    updateLead: function updateLead() {\n      return dispatch(_updateLead());\n    },\n    setLeadListLoading: function setLeadListLoading() {\n      return dispatch(_setLeadListLoading());\n    }\n  };\n}\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(ListCommunities);","map":{"version":3,"sources":["C:/xampp/htdocs/wordpress/dashboard/src/app/pages/home-owner/leads/list-leads.js"],"names":["React","useEffect","useState","connect","listAllLeads","updateLead","setLeadListLoading","useDispatch","Link","notifyUser","Row","Col","Table","Space","Breadcrumb","Tooltip","compose","FilterFilled","leadApprovalOptions","leadStatusOptions","residentMoveTimeFrameOptions","getColumnSearchProps","moment","LeadApproval","ListCommunities","leadList","leadListLoading","leadMessage","leadUpdated","leadListMeta","pageSize","current","pagination","setPagination","sort","setSort","filters","setFilters","dispatch","handelApprovalChange","values","leadId","fields","filter","page","limit","meta","total","filter_count","type","console","log","handelTableChange","tableFilters","sorter","field","order","_filters","Object","entries","forEach","key","value","orFilter","approval","_in","status","map","data","push","budget","_eq","_or","clients","name","_contains","residents","getTimeFrameValue","client","timeFrameValue","primary_resident","Item","move_time_frame","text","second_resident","columns","title","dataIndex","render","lead","home_id","sortDirections","date","Date","year","getFullYear","month","getMonth","toString","length","day","getDate","format","style","width","getBudgetNotesValue","editLead","budgetNotesValue","budget_notes","id","denied_reason","date_created","home","client_name","resident_name","second_resident_name","home_name","time_sent","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { listAllLeads, updateLead, setLeadListLoading } from \"../../../redux/actions/lead-actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { notifyUser } from \"../../../services/notification-service\";\r\nimport { Row, Col, Table, Space, Breadcrumb, Tooltip } from \"antd\";\r\nimport { compose } from \"redux\";\r\nimport { FilterFilled } from '@ant-design/icons';\r\nimport { leadApprovalOptions, leadStatusOptions, residentMoveTimeFrameOptions } from \"../../../constants/defaultValues\";\r\nimport { getColumnSearchProps } from \"../../../helpers/columnSearchProps\";\r\nimport moment from \"moment\";\r\nimport LeadApproval from \"./lead-approval\";\r\n\r\nconst ListCommunities = ({ leadList, leadListLoading, leadMessage, leadUpdated, leadListMeta }) => {\r\n\r\n  const [pagination, setPagination] = useState({\r\n    pageSize: 5,\r\n    current: 1,\r\n  });\r\n  const [sort, setSort] = useState([]);\r\n  const [filters, setFilters] = useState({});\r\n  const dispatch = useDispatch();\r\n  const handelApprovalChange = (values, leadId) => {\r\n    dispatch(updateLead(leadId, values));\r\n  }\r\n  useEffect(() => {\r\n    leadListLoading && dispatch(listAllLeads({ fields: ['*', \"client.*\", \"client.primary_resident.*\", \"client.second_resident.*\", \"home.*\"], filter: filters, sort, page: pagination.current, limit: pagination.pageSize, meta: \"*\" }));\r\n    leadListMeta && setPagination({ ...pagination, total: leadListMeta.filter_count })\r\n    if (leadUpdated) {\r\n      notifyUser(leadMessage, \"success\");\r\n    }\r\n    dispatch({\r\n      type: 'RESET'\r\n    })\r\n    return () => {\r\n      console.log(\"Communities Unmounting\");\r\n    };\r\n  }, [leadUpdated, leadMessage, leadListLoading]);\r\n\r\n  const handelTableChange = ({ current }, tableFilters, sorter) => {\r\n    if (sorter && sorter.field) {\r\n      if (sorter.order == \"ascend\") {\r\n        setSort(sorter.field);\r\n      } else {\r\n        setSort(\"-\" + sorter.field);\r\n      }\r\n    }\r\n\r\n    let _filters = {};\r\n\r\n\r\n    Object.entries(tableFilters).forEach(([key, value]) => {\r\n      let orFilter = [];\r\n      if (value) {\r\n        switch (key) {\r\n          case \"approval\":\r\n            _filters.approval = { _in: value }\r\n            break;\r\n          case \"status\":\r\n            _filters.status = { _in: value }\r\n            break;\r\n\r\n          case \"budget\":\r\n            orFilter = [];\r\n            value.map((data) => { orFilter.push({ budget: { _eq: data } }) })\r\n            _filters._or = orFilter;\r\n            break;\r\n\r\n          case \"client_name\":\r\n            orFilter = [];\r\n            value.map((data) => { orFilter.push({ clients: { name: { _contains: data } } }) })\r\n            _filters._or = orFilter;\r\n            break;\r\n          case \"resident_name\":\r\n            orFilter = [];\r\n            value.map((data) => { orFilter.push({ residents: { name: { _contains: data } } }) })\r\n            _filters._or = orFilter;\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      } else {\r\n\r\n      }\r\n\r\n    });\r\n    setFilters({ ..._filters });\r\n    setPagination({ ...pagination, current });\r\n    dispatch(setLeadListLoading(true));\r\n  }\r\n\r\n  const getTimeFrameValue = (client) => {\r\n    let timeFrameValue = \"\"\r\n    if (client) {\r\n      if (client.primary_resident) {\r\n        residentMoveTimeFrameOptions.forEach(Item => {\r\n          if (Item.value == client.primary_resident.move_time_frame) {\r\n            timeFrameValue = Item.text\r\n          }\r\n        })\r\n      }\r\n      if (client.second_resident) {\r\n        residentMoveTimeFrameOptions.forEach(Item => {\r\n          if (Item.value == client.second_resident.move_time_frame) {\r\n            timeFrameValue = Item.text\r\n          }\r\n        })\r\n      }\r\n    }\r\n    return timeFrameValue\r\n  }\r\n\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Client Name',\r\n      dataIndex: 'client_name',\r\n      key: 'client_name',\r\n      //...getColumnSearchProps(\"client_name\"),\r\n      render: (text, lead) => (\r\n        <Space size=\"middle\">\r\n          <Link to={`/owner/leads/${lead.key}`}>{text}</Link>\r\n\r\n        </Space>\r\n      )\r\n    },\r\n\r\n    {\r\n      title: 'Resident Name',\r\n      dataIndex: 'resident_name',\r\n      key: 'resident_name',\r\n     // ...getColumnSearchProps(\"resident_name\"),\r\n      render: (text, lead) => (\r\n        <Space size=\"middle\">\r\n          <Link to={`/owner/leads/${lead.key}/resident`}>{text}</Link>\r\n\r\n        </Space>\r\n      )\r\n    },\r\n    {\r\n      title: 'Second Resident Name',\r\n      dataIndex: 'second_resident_name',\r\n      key: 'resident_name',\r\n     // ...getColumnSearchProps(\"resident_name\"),\r\n      render: (text, lead) => (\r\n        <Space size=\"middle\">\r\n          <Link to={`/owner/leads/${lead.key}/resident`}>{text}</Link>\r\n\r\n        </Space>\r\n      )\r\n    },\r\n    {\r\n      title: 'Community',\r\n      dataIndex: 'home_name',\r\n      key: 'home_name',\r\n      //...getColumnSearchProps(\"home_name\"),\r\n      render: (text, lead) => (\r\n        <Space size=\"middle\">\r\n          <Link to={`/owner/communities/${lead.home_id}`}>{text}</Link>\r\n\r\n        </Space>\r\n      )\r\n    },\r\n\r\n\r\n    {\r\n      title: 'Date Sent',\r\n      dataIndex: 'date_created',\r\n      key: 'date_created',\r\n      //sorter: true,\r\n      sortDirections: ['ascend', 'descend', 'ascend'],\r\n      render: (text) => {\r\n        var date = new Date(text);\r\n        var year = date.getFullYear();\r\n\r\n        var month = (1 + date.getMonth()).toString();\r\n        month = month.length > 1 ? month : '0' + month;\r\n\r\n        var day = date.getDate().toString();\r\n        day = day.length > 1 ? day : '0' + day;\r\n\r\n        return (\r\n          <Space size=\"middle\">\r\n            {`${month}/${day}/${year}`}\r\n          </Space>\r\n        )\r\n      }\r\n\r\n    },\r\n    {\r\n      title: 'Time Sent',\r\n      dataIndex: 'time_sent',\r\n      key: 'time_sent',\r\n      //sorter: false,\r\n      sortDirections: ['ascend', 'descend', 'ascend'],\r\n      render: (text) => {\r\n        var date = new Date(text);\r\n        var year = date.getFullYear();\r\n\r\n        var month = (1 + date.getMonth()).toString();\r\n        month = month.length > 1 ? month : '0' + month;\r\n\r\n        var day = date.getDate().toString();\r\n        day = day.length > 1 ? day : '0' + day;\r\n\r\n        return (\r\n          <Space size=\"middle\">\r\n            {moment(text).format('LT')}\r\n          </Space>\r\n        )\r\n      }\r\n\r\n    },\r\n    // {\r\n    //   title: 'Budget',\r\n    //   dataIndex: 'budget',\r\n    //   key: 'budget',\r\n    //   sorter: true,\r\n    //   sortDirections: ['ascend', 'descend', 'ascend'],\r\n    //   ...getColumnSearchProps(\"budget\"),\r\n    //   render: (text) => (\r\n    //     <Space size=\"middle\">\r\n    //       {`$${text !== null ? text : '0'}`}\r\n    //     </Space>\r\n    //   )\r\n    // },\r\n    {\r\n      title: 'Budget Notes',\r\n      dataIndex: 'budget_notes',\r\n      key: 'budget_notes',\r\n      render: (text) => (\r\n        <Space size=\"middle\">\r\n          {text && text}\r\n        </Space>\r\n      )\r\n    },\r\n    {\r\n      title: 'Approval',\r\n      dataIndex: 'approval',\r\n      key: 'approval',\r\n      style: { width: \"130px\" },\r\n      //sorter: true,\r\n      sortDirections: ['ascend', 'descend', 'ascend'],\r\n      //filters: leadApprovalOptions,\r\n      //filterIcon: (<Tooltip title=\"Filter\"><FilterFilled /></Tooltip>),\r\n      render: (value, lead) => {\r\n        return <LeadApproval value={value} lead={lead} handelApprovalChange={handelApprovalChange} />\r\n        /*const [form] = Form.useForm();\r\n        const [approval, setApproval] = useState(value);\r\n        const [deniedRreason, setDeniedReason] = useState(lead.denied_reason);\r\n        const handelSubmit = (values) => {\r\n          if (!values.denied_reason) {\r\n            values.denied_reason = null;\r\n          }\r\n          handelApprovalChange(values, lead.key)\r\n        }\r\n        const overlay = (\r\n          <Form key={lead.key} form={form} layout={\"vertical\"} initialValues={lead} onFinish={handelSubmit} >\r\n            <Form.Item label=\"Approval\" name=\"approval\">\r\n              <Select style={{ width: \"180px\" }} onChange={setApproval}>\r\n                {leadApprovalOptions.map((option) => {\r\n                  return (<Select.Option value={option.value}>{option.text}</Select.Option>)\r\n                })}\r\n              </Select>\r\n            </Form.Item>\r\n            {(approval == \"denied_other\") &&\r\n              <Form.Item label=\"Reason\" name=\"denied_reason\">\r\n                <TextArea onChange={(e) => { setDeniedReason(e.target.value) }} />\r\n              </Form.Item>\r\n            }\r\n\r\n            <Form.Item>\r\n              <Button type=\"primary\" htmlType=\"submit\"> Save </Button>\r\n            </Form.Item>\r\n\r\n          </Form>\r\n        );\r\n        return (\r\n          <Popover placement=\"bottomLeft\" content={overlay} trigger=\"click\">\r\n            <Tag>\r\n              <a onClick={e => e.preventDefault()}>\r\n                {humanize(value)} <DownOutlined />\r\n              </a>\r\n\r\n            </Tag>\r\n          </Popover>\r\n        )*/\r\n      }\r\n    },\r\n    {\r\n      title: 'Move Time Frame',\r\n      dataIndex: 'move_time_frame',\r\n      key: 'move_time_frame',\r\n      //sorter: true,\r\n      sortDirections: ['ascend', 'descend', 'ascend'],\r\n      // filters: leadStatusOptions,\r\n      // filterIcon: (<Tooltip title=\"Filter\"><FilterFilled /></Tooltip>),\r\n      render: (text) => (\r\n        <Space >\r\n          {getTimeFrameValue(text)}\r\n        </Space>\r\n      )\r\n    },\r\n    // {\r\n    //   title: 'Status',\r\n    //   dataIndex: 'status',\r\n    //   key: 'status',\r\n    //   sorter: true,\r\n    //   sortDirections: ['ascend', 'descend', 'ascend'],\r\n    //   filters: leadStatusOptions,\r\n    //   filterIcon: (<Tooltip title=\"Filter\"><FilterFilled /></Tooltip>),\r\n    //   render: (text) => (\r\n    //     <Space >\r\n    //       {humanize(text)}\r\n    //     </Space>\r\n    //   )\r\n    // },\r\n\r\n\r\n  ];\r\n\r\n  const getBudgetNotesValue = (editLead) => {\r\n    let budgetNotesValue = \"\"\r\n    if (editLead) {\r\n      if (editLead.primary_resident) {\r\n        budgetNotesValue = editLead.primary_resident.budget_notes\r\n      }\r\n      else if (editLead.second_resident) {\r\n        budgetNotesValue = editLead.second_resident.budget_notes\r\n      }\r\n      else {\r\n        budgetNotesValue = \"\"\r\n      }\r\n    }\r\n    return budgetNotesValue\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <Breadcrumb>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/owner\">Home</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/owner/leads\">Leads</Link>\r\n        </Breadcrumb.Item>\r\n      </Breadcrumb>\r\n      <Row gutter={30}>\r\n        <Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n          <Table\r\n            columns={columns}\r\n            loading={leadListLoading}\r\n            dataSource={leadList.map(({ client, budget, budget_notes, approval, status, id, denied_reason, date_created, home }) => {\r\n              console.log(client, 'client');\r\n              return { client_name: client ? client.name : \"\", resident_name: (client && client.primary_resident) ? client.primary_resident.name : \"\", second_resident_name: (client && client.second_resident) ? client.second_resident.name : \"\", budget, budget_notes: getBudgetNotesValue(client), approval, key: id, denied_reason, date_created, home_name: home && home.name, home_id: home.id, time_sent: date_created, move_time_frame: client };\r\n            })}\r\n            pagination={pagination}\r\n            onChange={handelTableChange}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    leadList: state.lead.leadList,\r\n    leadListLoading: state.lead.leadListLoading,\r\n    leadListMeta: state.lead.leadListMeta,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    listAllLeads: () => dispatch(listAllLeads()),\r\n    updateLead: () => dispatch(updateLead()),\r\n    setLeadListLoading: () => dispatch(setLeadListLoading()),\r\n  };\r\n}\r\n\r\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(ListCommunities);\r\n"]},"metadata":{},"sourceType":"module"}