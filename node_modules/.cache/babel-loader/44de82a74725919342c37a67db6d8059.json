{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\src\\\\app\\\\pages\\\\admin\\\\partner\\\\lead-contacts\\\\add-lead-contact.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { Row, Col, Input, Card, Skeleton, Breadcrumb, PageHeader } from \"antd\";\nimport { compose } from \"redux\";\nimport { createLeadContact as _createLeadContact, updateLeadContact } from \"../../../../redux/actions/lead-contact-actions\";\nimport LeadContactForm from \"./lead-contact-form\";\nimport UserService from \"../../../../services/user-service\";\nimport { notifyUser } from \"../../../../services/notification-service\";\nimport leadContactApi from \"../../../../redux/api/lead-contact-api\";\nimport { humanize } from \"../../../../helpers/string-helper\";\n\nvar AddLeadContact = function AddLeadContact(_ref) {\n  var history = _ref.history;\n  var dispatch = useDispatch();\n  var user = UserService.getAdminUser();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      buttonLoading = _useState2[0],\n      setButtonLoading = _useState2[1];\n\n  useEffect(function () {\n    return function () {\n      console.log(\"Edit LeadContact Unmounting\");\n    };\n  }, []); // const handleSave = async (values) => {\n  //   dispatch(createLeadContact(values));\n  //   notifyUser(\"Details have been saved\", \"success\");\n  //   history.push(\"/admin/partners/community/lead-contacts\");\n  // };\n\n  var handleSave = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n      var newHome;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setButtonLoading(true);\n              values.user_created = user.id;\n              newHome = [];\n              values.homes.forEach(function (element) {\n                newHome.push({\n                  homes_id: element\n                });\n              });\n              values.homes = newHome;\n              _context2.next = 7;\n              return leadContactApi.createLeadContact(values).then( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(createLeadData) {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          console.log(createLeadData.data);\n                          createLeadData.data.user_created = user.id;\n                          dispatch(updateLeadContact(createLeadData.data.id, createLeadData.data)).then(function (Data) {\n                            // console.log(Data);\n                            notifyUser('Lead Contact Added', 'success');\n                            history.push(\"/admin/partners/community/lead-contacts\");\n                          });\n\n                        case 3:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x2) {\n                  return _ref3.apply(this, arguments);\n                };\n              }(), function (error) {\n                console.log(error.response);\n                notifyUser(JSON.parse(error.response.data).errors[0].message, 'error');\n                setButtonLoading(false);\n              });\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleSave(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Breadcrumb, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, \"Home\")), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/partners\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, \"Partners\")), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/partner/overview\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 26\n    }\n  }, humanize(user.first_name), \" \", humanize(user.last_name))), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/partners/community/lead-contacts\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, \"Lead Contacts\")), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/partners/community/lead-contacts/add\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, \"Add Lead Contact\"))), /*#__PURE__*/React.createElement(PageHeader, {\n    className: \"site-page-header\",\n    title: \"Add Lead Contact\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    gutter: 30,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 16,\n    lg: 16,\n    xl: 16,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LeadContactForm, {\n    initialValues: {\n      status: \"published\"\n    },\n    handleSave: handleSave,\n    buttonLoading: buttonLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }))));\n};\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    createLeadContact: function createLeadContact() {\n      return dispatch(_createLeadContact());\n    }\n  };\n}\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(AddLeadContact);","map":{"version":3,"sources":["C:/xampp/htdocs/wordpress/dashboard/src/app/pages/admin/partner/lead-contacts/add-lead-contact.js"],"names":["React","useEffect","useState","connect","useDispatch","Link","useParams","Row","Col","Input","Card","Skeleton","Breadcrumb","PageHeader","compose","createLeadContact","updateLeadContact","LeadContactForm","UserService","notifyUser","leadContactApi","humanize","AddLeadContact","history","dispatch","user","getAdminUser","buttonLoading","setButtonLoading","console","log","handleSave","values","user_created","id","newHome","homes","forEach","element","push","homes_id","then","createLeadData","data","Data","error","response","JSON","parse","errors","message","first_name","last_name","status","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { Row, Col, Input, Card, Skeleton, Breadcrumb, PageHeader } from \"antd\";\r\nimport { compose } from \"redux\";\r\nimport { createLeadContact, updateLeadContact } from \"../../../../redux/actions/lead-contact-actions\";\r\nimport LeadContactForm from \"./lead-contact-form\";\r\nimport UserService from \"../../../../services/user-service\";\r\nimport { notifyUser } from \"../../../../services/notification-service\";\r\nimport leadContactApi from \"../../../../redux/api/lead-contact-api\";\r\nimport { humanize } from \"../../../../helpers/string-helper\";\r\n\r\nconst AddLeadContact = ({ history }) => {\r\n  const dispatch = useDispatch();\r\n  const user = UserService.getAdminUser();\r\n  const [buttonLoading, setButtonLoading] = useState(false);\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"Edit LeadContact Unmounting\");\r\n    };\r\n  }, []);\r\n\r\n  // const handleSave = async (values) => {\r\n  //   dispatch(createLeadContact(values));\r\n  //   notifyUser(\"Details have been saved\", \"success\");\r\n  //   history.push(\"/admin/partners/community/lead-contacts\");\r\n  // };\r\n\r\n  const handleSave = async (values) => {\r\n    setButtonLoading(true);\r\n    values.user_created = user.id\r\n    let newHome = [];\r\n    values.homes.forEach(element => {\r\n      newHome.push({ homes_id: element })\r\n    });\r\n    values.homes = newHome\r\n    await leadContactApi.createLeadContact(values).then(async (createLeadData) => {\r\n      console.log(createLeadData.data);\r\n      createLeadData.data.user_created = user.id\r\n      dispatch(updateLeadContact(createLeadData.data.id, createLeadData.data)).then((Data) => {\r\n        // console.log(Data);\r\n        notifyUser('Lead Contact Added', 'success');\r\n        history.push(\"/admin/partners/community/lead-contacts\");\r\n      });\r\n\r\n    },\r\n      (error) => {\r\n        console.log(error.response);\r\n        notifyUser(JSON.parse(error.response.data).errors[0].message, 'error')\r\n        setButtonLoading(false);\r\n      })\r\n\r\n    // history.push(\"/owner/profile\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Breadcrumb>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/admin\">Home</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/admin/partners\">Partners</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item><Link to=\"/admin/partner/overview\">{humanize(user.first_name)} {humanize(user.last_name)}</Link></Breadcrumb.Item>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/admin/partners/community/lead-contacts\">Lead Contacts</Link>\r\n        </Breadcrumb.Item>\r\n\r\n        <Breadcrumb.Item>\r\n          <Link to={`/admin/partners/community/lead-contacts/add`}>{`Add Lead Contact`}</Link>\r\n        </Breadcrumb.Item>\r\n      </Breadcrumb>\r\n      <PageHeader className=\"site-page-header\" title=\"Add Lead Contact\" />\r\n\r\n      <Row gutter={30}>\r\n        <Col xs={24} sm={24} md={16} lg={16} xl={16}>\r\n          <LeadContactForm initialValues={{ status: \"published\" }} handleSave={handleSave} buttonLoading={buttonLoading} />\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    createLeadContact: () => dispatch(createLeadContact()),\r\n  };\r\n}\r\n\r\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(\r\n  AddLeadContact\r\n);\r\n"]},"metadata":{},"sourceType":"module"}