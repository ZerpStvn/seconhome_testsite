{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\SFelizardo\\\\Desktop\\\\Projects\\\\secondhome\\\\second-home-referrals\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\SFelizardo\\\\Desktop\\\\Projects\\\\secondhome\\\\second-home-referrals\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\SFelizardo\\\\Desktop\\\\Projects\\\\secondhome\\\\second-home-referrals\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\SFelizardo\\\\Desktop\\\\Projects\\\\secondhome\\\\second-home-referrals\\\\src\\\\app\\\\pages\\\\login\\\\login-popup.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { Switch, useHistory, useLocation } from \"react-router-dom\";\nimport { Layout, Modal, Typography, Form, Button, Input, Checkbox, Row, Col, Spin } from \"antd\";\nimport { signin } from \"../../redux/actions/auth-actions\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { compose } from \"redux\";\nimport { ReactComponent as Logo } from \"@svgr/webpack?-prettier,-svgo!../../assets/images/second-homes-logo.svg\";\nimport { notifyUser } from \"../../services/notification-service\";\nimport { UserOutlined, LockOutlined, EyeTwoTone, EyeInvisibleOutlined } from \"@ant-design/icons\";\nimport { loadCurrentLoggedInUser as _loadCurrentLoggedInUser } from \"../../redux/actions/user-actions\";\nimport UserAPI from \"../../redux/api/user-api\";\nimport API from \"../../redux/api/lead-client-api\";\nimport UserService from \"../../services/user-service\";\nimport dollerIcon from \"../../../app/assets/images/doller-icon.svg\";\nimport saveIcon from \"../../../app/assets/images/save-icon.svg\";\nimport roomIcon from \"../../../app/assets/images/room-icon.svg\";\nimport favIcon from \"../../../app/assets/images/fav-home-icon.svg\";\nimport Config from \"../../config\";\nvar Title = Typography.Title,\n    Paragraph = Typography.Paragraph,\n    Text = Typography.Text;\n\nvar LogInPopUp = function LogInPopUp(props) {\n  var history = useHistory();\n  var dispatch = useDispatch();\n  var directLogIn = props.logInDirect;\n  var loginRedirect = props.loginRedirect;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      submitted = _useState2[0],\n      setSubmitted = _useState2[1]; // const [directLogIn, setDirectLogIn] = useState(props.logInDirect);\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      logInModalVisible = _useState4[0],\n      setLogInModalVisible = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showSignUpForm = _useState6[0],\n      setShowSignUpForm = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      clientAddress = _useState8[0],\n      setClientAddress = _useState8[1];\n\n  useEffect(function () {\n    setLogInModalVisible(props.logInModalVisible);\n    setShowSignUpForm(props.createAccount);\n  }, [props.logInModalVisible]);\n\n  var logInHandle = function logInHandle() {\n    setLogInModalVisible(true);\n  };\n\n  var logInPopUpCancelHandle = function logInPopUpCancelHandle() {\n    props.loginModalCancel && props.loginModalCancel();\n    setLogInModalVisible(false);\n    showSignUpModalHandle();\n  };\n\n  var laterHandle = function laterHandle() {\n    props.OnSubmit(); // dispatch(loadCurrentLoggedInUser())\n\n    logInPopUpCancelHandle();\n  };\n\n  var showSignUpModalHandle = function showSignUpModalHandle() {\n    setShowSignUpForm(!showSignUpForm);\n  };\n\n  var onFinish = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setSubmitted(true);\n              _context.next = 3;\n              return dispatch(signin(values.email, values.password));\n\n            case 3:\n              response = _context.sent;\n\n              if (response.error && response.error !== \"\") {\n                notifyUser(\"Invalid Credentials\", \"error\");\n                setSubmitted(false);\n              } else {\n                if (response.redirect && response.redirect !== \"\") {\n                  notifyUser(\"Logged In successfully\", \"success\");\n                  dispatch(_loadCurrentLoggedInUser());\n\n                  if (directLogIn && !loginRedirect) {\n                    history.push(\"/\".concat(response.redirect.replace(\"dashboard/\", \"\")));\n                  } else if (loginRedirect) {\n                    history.reload();\n                  } else {\n                    laterHandle();\n                  }\n                } else {\n                  notifyUser(\"InValid Credentials\", \"error\");\n                  setSubmitted(false);\n                }\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onFinish(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var createAccount = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(values) {\n      var users, countPartners;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setSubmitted(true);\n              _context4.next = 3;\n              return UserAPI.loadAllUsers({\n                meta: 'filter_count',\n                filter: {\n                  role: {\n                    _eq: \"eed0ea0e-d137-42b3-8cef-3e53c9038aa8\"\n                  }\n                }\n              });\n\n            case 3:\n              users = _context4.sent;\n              countPartners = users.meta.filter_count;\n              values.client_code = \"C\" + (countPartners + 1 + \"\").padStart(3, \"0\");\n              values.role = \"eed0ea0e-d137-42b3-8cef-3e53c9038aa8\";\n              values.name = values.first_name + \" \" + values.last_name;\n              UserAPI.addUser({\n                first_name: values.first_name,\n                last_name: values.last_name,\n                role: \"eed0ea0e-d137-42b3-8cef-3e53c9038aa8\",\n                email: values.email,\n                password: values.password\n              }).then( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(user) {\n                  return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                      switch (_context3.prev = _context3.next) {\n                        case 0:\n                          if (user.data) {\n                            dispatch(signin(values.email, values.password)).then( /*#__PURE__*/function () {\n                              var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(loginData) {\n                                var response;\n                                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                                  while (1) {\n                                    switch (_context2.prev = _context2.next) {\n                                      case 0:\n                                        if (!(loginData.error && loginData.error !== \"\")) {\n                                          _context2.next = 5;\n                                          break;\n                                        }\n\n                                        notifyUser(\"Invalid Credentials\", \"error\");\n                                        setSubmitted(false);\n                                        _context2.next = 15;\n                                        break;\n\n                                      case 5:\n                                        if (!(loginData.redirect && loginData.redirect !== \"\")) {\n                                          _context2.next = 13;\n                                          break;\n                                        }\n\n                                        values.user = user.data.id;\n                                        _context2.next = 9;\n                                        return API.createLeadClient(values);\n\n                                      case 9:\n                                        response = _context2.sent;\n\n                                        if (response.data) {\n                                          user.data.client = [response.data];\n                                          UserService.setAdminUser(user.data);\n                                          notifyUser(\"New Client Added.\", \"success\");\n                                          history.push(loginData.redirect.replace(\"dashboard/\", \"\"));\n                                        } else {\n                                          notifyUser(\"There is some error. Please try again.\", \"error\");\n                                        }\n\n                                        _context2.next = 15;\n                                        break;\n\n                                      case 13:\n                                        notifyUser(\"InValid Credentials\", \"error\");\n                                        setSubmitted(false);\n\n                                      case 15:\n                                      case \"end\":\n                                        return _context2.stop();\n                                    }\n                                  }\n                                }, _callee2);\n                              }));\n\n                              return function (_x4) {\n                                return _ref4.apply(this, arguments);\n                              };\n                            }());\n                          }\n\n                        case 1:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }\n                  }, _callee3);\n                }));\n\n                return function (_x3) {\n                  return _ref3.apply(this, arguments);\n                };\n              }()).catch(function (Error) {\n                notifyUser(JSON.parse(Error.response.data).errors[0].message, \"error\"); // console.log(JSON.parse(Error.response.data).errors[0].message);\n              });\n\n            case 9:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function createAccount(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    className: \"new-popup-ui\",\n    visible: logInModalVisible,\n    onCancel: logInPopUpCancelHandle,\n    footer: null,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    level: 3,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, \"Log-in or create a free account and access:\"), /*#__PURE__*/React.createElement(Row, {\n    className: \"popup-top-list\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: dollerIcon,\n    alt: \"logo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }, \"Monthly Rates\"))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: saveIcon,\n    alt: \"logo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, \"Saved Searches\"))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: roomIcon,\n    alt: \"logo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, \"Available Rooms\"))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: favIcon,\n    alt: \"logo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }, \"Favorite Homes\")))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: showSignUpForm ? \"none\" : \"block\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    layout: \"vertical\",\n    name: \"normal_login\",\n    className: \"login_form\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: onFinish,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Email\",\n    name: \"email\",\n    rules: [{\n      required: true,\n      message: \"Please input your Email!\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    prefix: /*#__PURE__*/React.createElement(UserOutlined, {\n      className: \"site-form-item-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 40\n      }\n    }),\n    placeholder: \"Username\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"password\",\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: \"Please input your Password!\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    prefix: /*#__PURE__*/React.createElement(LockOutlined, {\n      className: \"site-form-item-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 37\n      }\n    }),\n    type: \"password\",\n    placeholder: \"Password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    className: \"login-form-button btn-style\",\n    loading: submitted,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, \"Continue\")))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: showSignUpForm ? \"block\" : \"none\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onFinish: createAccount,\n    name: \"dynamic_rule\",\n    layout: \"vertical\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"First Name\",\n    name: \"first_name\",\n    rules: [{\n      required: true,\n      whitespace: true,\n      message: 'Please enter First Name'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Johan\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Last Name\",\n    name: \"last_name\",\n    rules: [{\n      required: true,\n      whitespace: true,\n      message: 'Please enter Last Name'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Smith\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Email\",\n    name: \"email\",\n    rules: [{\n      type: 'email',\n      required: true,\n      message: 'Please enter Email'\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"johansmith@example.com\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Password\",\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: \"Please input your Password!\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Input.Password, {\n    placeholder: \"Password\",\n    iconRender: function iconRender(visible) {\n      return visible ? /*#__PURE__*/React.createElement(EyeTwoTone, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 63\n        }\n      }) : /*#__PURE__*/React.createElement(EyeInvisibleOutlined, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 80\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    loading: submitted,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 25\n    }\n  }, \"Create Account\")))), /*#__PURE__*/React.createElement(Typography, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Paragraph, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 21\n    }\n  }, \"By creating an account you agree to Second Home's \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"\".concat(Config.MainUrl, \"/privacy-policy\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 108\n    }\n  }, \"Privacy Policy\"))), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"login-form-forgot\",\n    href: \"/dashboard/forgot-password\",\n    style: {\n      display: showSignUpForm ? \"none\" : \"block\",\n      float: 'right'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 17\n    }\n  }, \"Forgot password\"), props.willLater ? /*#__PURE__*/React.createElement(Button, {\n    className: \"link-btn\",\n    type: \"text\",\n    onClick: laterHandle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 36\n    }\n  }, \"I\\u2019ll do it later\") : ''));\n};\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    loadCurrentLoggedInUser: function loadCurrentLoggedInUser() {\n      return dispatch(_loadCurrentLoggedInUser());\n    }\n  };\n}\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(LogInPopUp);","map":{"version":3,"sources":["C:/Users/SFelizardo/Desktop/Projects/secondhome/second-home-referrals/src/app/pages/login/login-popup.js"],"names":["React","useEffect","useState","Switch","useHistory","useLocation","Layout","Modal","Typography","Form","Button","Input","Checkbox","Row","Col","Spin","signin","connect","useDispatch","compose","notifyUser","UserOutlined","LockOutlined","EyeTwoTone","EyeInvisibleOutlined","loadCurrentLoggedInUser","UserAPI","API","UserService","Config","Title","Paragraph","Text","LogInPopUp","props","history","dispatch","directLogIn","logInDirect","loginRedirect","submitted","setSubmitted","logInModalVisible","setLogInModalVisible","showSignUpForm","setShowSignUpForm","clientAddress","setClientAddress","createAccount","logInHandle","logInPopUpCancelHandle","loginModalCancel","showSignUpModalHandle","laterHandle","OnSubmit","onFinish","values","email","password","response","error","redirect","push","replace","reload","loadAllUsers","meta","filter","role","_eq","users","countPartners","filter_count","client_code","padStart","name","first_name","last_name","addUser","then","user","data","loginData","id","createLeadClient","client","setAdminUser","catch","Error","JSON","parse","errors","message","dollerIcon","saveIcon","roomIcon","favIcon","display","remember","required","whitespace","type","visible","textAlign","MainUrl","float","willLater","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Switch, useHistory, useLocation } from \"react-router-dom\";\r\nimport { Layout, Modal, Typography, Form, Button, Input, Checkbox, Row, Col, Spin } from \"antd\";\r\nimport { signin } from \"../../redux/actions/auth-actions\";\r\nimport { connect, useDispatch } from \"react-redux\";\r\nimport { compose } from \"redux\";\r\nimport { ReactComponent as Logo } from \"../../assets/images/second-homes-logo.svg\";\r\nimport { notifyUser } from \"../../services/notification-service\";\r\nimport { UserOutlined, LockOutlined, EyeTwoTone, EyeInvisibleOutlined } from \"@ant-design/icons\";\r\nimport { loadCurrentLoggedInUser } from \"../../redux/actions/user-actions\";\r\nimport UserAPI from \"../../redux/api/user-api\";\r\nimport API from \"../../redux/api/lead-client-api\";\r\nimport UserService from \"../../services/user-service\";\r\nimport dollerIcon from \"../../../app/assets/images/doller-icon.svg\";\r\nimport saveIcon from \"../../../app/assets/images/save-icon.svg\";\r\nimport roomIcon from \"../../../app/assets/images/room-icon.svg\";\r\nimport favIcon from \"../../../app/assets/images/fav-home-icon.svg\";\r\nimport Config from \"../../config\";\r\n\r\nconst { Title, Paragraph, Text } = Typography;\r\n\r\nconst LogInPopUp = (props) => {\r\n\r\n    let history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const directLogIn = props.logInDirect;\r\n    const loginRedirect = props.loginRedirect;\r\n    const [submitted, setSubmitted] = useState(false);\r\n    // const [directLogIn, setDirectLogIn] = useState(props.logInDirect);\r\n    const [logInModalVisible, setLogInModalVisible] = useState(false);\r\n    const [showSignUpForm, setShowSignUpForm] = useState(false);\r\n    const [clientAddress, setClientAddress] = useState(null);\r\n\r\n    useEffect(() => {\r\n        setLogInModalVisible(props.logInModalVisible);\r\n        setShowSignUpForm(props.createAccount);\r\n    }, [props.logInModalVisible]);\r\n\r\n\r\n    const logInHandle = () => {\r\n        setLogInModalVisible(true);\r\n    }\r\n    const logInPopUpCancelHandle = () => {\r\n        props.loginModalCancel && props.loginModalCancel();\r\n        setLogInModalVisible(false);\r\n        showSignUpModalHandle();\r\n    }\r\n\r\n    const laterHandle = () => {\r\n        props.OnSubmit();\r\n        // dispatch(loadCurrentLoggedInUser())\r\n        logInPopUpCancelHandle();\r\n    }\r\n\r\n    const showSignUpModalHandle = () => {\r\n        setShowSignUpForm(!showSignUpForm);\r\n    }\r\n\r\n    const onFinish = async (values) => {\r\n        setSubmitted(true);\r\n        const response = await dispatch(signin(values.email, values.password));\r\n        if (response.error && response.error !== \"\") {\r\n            notifyUser(\"Invalid Credentials\", \"error\");\r\n            setSubmitted(false);\r\n        } else {\r\n            if (response.redirect && response.redirect !== \"\") {\r\n                notifyUser(\"Logged In successfully\", \"success\");\r\n                dispatch(loadCurrentLoggedInUser())\r\n                if (directLogIn && !loginRedirect) {\r\n                    history.push(`/${response.redirect.replace(\"dashboard/\", \"\")}`);\r\n                } else if (loginRedirect) {\r\n                    history.reload();\r\n                }\r\n                else {\r\n                    laterHandle();\r\n                }\r\n\r\n            } else {\r\n                notifyUser(\"InValid Credentials\", \"error\");\r\n                setSubmitted(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const createAccount = async (values) => {\r\n        setSubmitted(true);\r\n        const users = await UserAPI.loadAllUsers({ meta: 'filter_count', filter: { role: { _eq: \"eed0ea0e-d137-42b3-8cef-3e53c9038aa8\" } } });\r\n        const countPartners = users.meta.filter_count;\r\n        values.client_code = \"C\" + ((countPartners + 1) + \"\").padStart(3, \"0\");\r\n        values.role = \"eed0ea0e-d137-42b3-8cef-3e53c9038aa8\";\r\n        values.name = values.first_name + \" \" + values.last_name;\r\n\r\n        UserAPI.addUser({ first_name: values.first_name, last_name: values.last_name, role: \"eed0ea0e-d137-42b3-8cef-3e53c9038aa8\", email: values.email, password: values.password }).then(async user => {\r\n            if (user.data) {\r\n                dispatch(signin(values.email, values.password)).then(async (loginData) => {\r\n                    if (loginData.error && loginData.error !== \"\") {\r\n                        notifyUser(\"Invalid Credentials\", \"error\");\r\n                        setSubmitted(false);\r\n                    } else {\r\n                        if (loginData.redirect && loginData.redirect !== \"\") {\r\n                            values.user = user.data.id;\r\n\r\n                            var response = await API.createLeadClient(values)\r\n                            if (response.data) {\r\n                                user.data.client = [response.data];\r\n                                UserService.setAdminUser(user.data);\r\n                                notifyUser(\"New Client Added.\", \"success\");\r\n                                history.push(loginData.redirect.replace(\"dashboard/\", \"\"));\r\n                            } else {\r\n                                notifyUser(\"There is some error. Please try again.\", \"error\")\r\n                            }\r\n\r\n                        } else {\r\n                            notifyUser(\"InValid Credentials\", \"error\");\r\n                            setSubmitted(false);\r\n                        }\r\n                    }\r\n\r\n                });\r\n            }\r\n        }).catch(Error => {\r\n            notifyUser(JSON.parse(Error.response.data).errors[0].message, \"error\");\r\n            // console.log(JSON.parse(Error.response.data).errors[0].message);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <Modal className=\"new-popup-ui\" visible={logInModalVisible} onCancel={logInPopUpCancelHandle} footer={null}>\r\n            <Title level={3}>Log-in or create a free account and access:</Title>\r\n            <Row className=\"popup-top-list\">\r\n                <Col xs={24} sm={24} md={12}>\r\n                    <div className=\"block\">\r\n                        <img src={dollerIcon} alt=\"logo\" />\r\n                        <h4>Monthly Rates</h4>\r\n                    </div>\r\n                </Col>\r\n                <Col xs={24} sm={24} md={12}>\r\n                    <div className=\"block\">\r\n                        <img src={saveIcon} alt=\"logo\" />\r\n                        <h4>Saved Searches</h4>\r\n                    </div>\r\n                </Col>\r\n                <Col xs={24} sm={24} md={12}>\r\n                    <div className=\"block\">\r\n                        <img src={roomIcon} alt=\"logo\" />\r\n                        <h4>Available Rooms</h4>\r\n                    </div>\r\n                </Col>\r\n                <Col xs={24} sm={24} md={12}>\r\n                    <div className=\"block\">\r\n                        <img src={favIcon} alt=\"logo\" />\r\n                        <h4>Favorite Homes</h4>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n            <div style={{ display: showSignUpForm ? \"none\" : \"block\" }}>\r\n                <Form\r\n                    layout=\"vertical\"\r\n                    name=\"normal_login\"\r\n                    className=\"login_form\"\r\n                    initialValues={{\r\n                        remember: true,\r\n                    }}\r\n                    onFinish={onFinish}\r\n                >\r\n                    <Form.Item\r\n                        label=\"Email\"\r\n                        name=\"email\"\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: \"Please input your Email!\",\r\n                            },\r\n                        ]}\r\n                    >\r\n                        <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"password\"\r\n                        name=\"password\"\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: \"Please input your Password!\",\r\n                            },\r\n                        ]}\r\n                    >\r\n                        <Input\r\n                            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                        />\r\n                    </Form.Item>\r\n                    {/* <Form.Item className=\"\">\r\n        <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n          <Checkbox>Remember me</Checkbox>\r\n        </Form.Item>\r\n        <a className=\"login-form-forgot\" href=\"/forgot-password\" style={{ float: 'right' }}>\r\n          Forgot password\r\n        </a>\r\n      </Form.Item> */}\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button btn-style\" loading={submitted}>\r\n                            Continue\r\n                        </Button>\r\n                    </Form.Item>\r\n                </Form>\r\n            </div>\r\n            <div style={{ display: showSignUpForm ? \"block\" : \"none\" }}>\r\n                <Form onFinish={createAccount} name=\"dynamic_rule\" layout=\"vertical\">\r\n                    <div className=\"\">\r\n                        <Form.Item\r\n                            label=\"First Name\"\r\n                            name=\"first_name\"\r\n                            rules={[\r\n                                {\r\n                                    required: true, whitespace: true,\r\n                                    message: 'Please enter First Name',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input placeholder=\"Johan\" />\r\n                        </Form.Item>\r\n                    </div>\r\n                    <div className=\"\">\r\n                        <Form.Item\r\n                            label=\"Last Name\"\r\n                            name=\"last_name\"\r\n                            rules={[\r\n                                {\r\n                                    required: true, whitespace: true,\r\n                                    message: 'Please enter Last Name',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input placeholder=\"Smith\" />\r\n                        </Form.Item>\r\n                    </div>\r\n                    <div className=\"\">\r\n                        <Form.Item\r\n                            label=\"Email\"\r\n                            name=\"email\"\r\n                            rules={[\r\n                                {\r\n                                    type: 'email',\r\n                                    required: true,\r\n                                    message: 'Please enter Email',\r\n                                },\r\n                            ]}\r\n                        >\r\n                            <Input placeholder=\"johansmith@example.com\" />\r\n                        </Form.Item>\r\n                    </div>\r\n\r\n                    <Form.Item\r\n                        label=\"Password\"\r\n                        name=\"password\"\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: \"Please input your Password!\",\r\n                            },\r\n                        ]}\r\n                    >\r\n                        <Input.Password\r\n                            placeholder=\"Password\"\r\n                            iconRender={visible => (visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />)}\r\n                        />\r\n                    </Form.Item>\r\n\r\n                    <Form.Item >\r\n                        <Button type=\"primary\" htmlType=\"submit\" loading={submitted}>Create Account</Button>\r\n                    </Form.Item>\r\n                </Form>\r\n            </div>\r\n\r\n            {/* <Button icon={<GoogleOutlined />} block>Continue with Google</Button>\r\n            <Button icon={<GoogleOutlined />} block>Continue with Facebook</Button>\r\n            <Button icon={<GoogleOutlined />} block>Continue with Apple</Button> */}\r\n            <Typography>\r\n                <Paragraph>\r\n                    {/* <div style={{ textAlign: \"center\" }}>By creating an account you agree to Second Home's <a href=\"\">Terms of Use</a> and <a href=\"\">Privacy Policy</a></div> */}\r\n                    <div style={{ textAlign: \"center\" }}>By creating an account you agree to Second Home's <a href={`${Config.MainUrl}/privacy-policy`}>Privacy Policy</a></div>\r\n                </Paragraph>\r\n                <a className=\"login-form-forgot\" href=\"/dashboard/forgot-password\" style={{ display: showSignUpForm ? \"none\" : \"block\", float: 'right' }}>\r\n                    Forgot password\r\n                </a>\r\n                {/* <Button className=\"link-btn\" type=\"link\" onClick={showSignUpModalHandle}>{showSignUpForm ? \"Already have an account\" : \"Don't have account\"}</Button> */}\r\n                {props.willLater ? <Button className=\"link-btn\" type=\"text\" onClick={laterHandle}>Ill do it later</Button> : ''}\r\n            </Typography>\r\n        </Modal>\r\n\r\n    );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        loadCurrentLoggedInUser: () => dispatch(loadCurrentLoggedInUser())\r\n    };\r\n}\r\n\r\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(LogInPopUp);\r\n"]},"metadata":{},"sourceType":"module"}