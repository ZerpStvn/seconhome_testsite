{"ast":null,"code":"import _objectSpread from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\src\\\\app\\\\pages\\\\home-owner\\\\invoices\\\\list-invoices.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { listAllInvoices as _listAllInvoices, updateInvoice as _updateInvoice, setInvoiceListLoading as _setInvoiceListLoading } from \"../../../redux/actions/invoice-actions\";\nimport { useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { notifyUser } from \"../../../services/notification-service\";\nimport { Row, Col, Table, Tag, Space, Breadcrumb } from \"antd\";\nimport { compose } from \"redux\";\nimport { humanize } from \"../../../helpers/string-helper\";\nimport { getColumnSearchProps } from \"../../../helpers/columnSearchProps\";\nimport { invoiceStatusOptions } from \"../../../constants/defaultValues\";\n\nvar ListInvoice = function ListInvoice(_ref) {\n  var invoiceList = _ref.invoiceList,\n      invoiceListLoading = _ref.invoiceListLoading,\n      invoiceMessage = _ref.invoiceMessage,\n      invoiceUpdated = _ref.invoiceUpdated,\n      invoiceListMeta = _ref.invoiceListMeta;\n\n  var _useState = useState({\n    pageSize: 5,\n    current: 1\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      pagination = _useState2[0],\n      setPagination = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sort = _useState4[0],\n      setSort = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      filters = _useState6[0],\n      setFilters = _useState6[1];\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    invoiceListLoading && dispatch(_listAllInvoices({\n      fields: ['*', \"lead.clients.*\", \"lead.residents.*\"],\n      filter: filters,\n      sort: sort,\n      page: pagination.current,\n      limit: pagination.pageSize,\n      meta: \"*\"\n    }));\n    invoiceListMeta && setPagination(_objectSpread({}, pagination, {\n      total: invoiceListMeta.filter_count\n    }));\n\n    if (invoiceUpdated) {\n      notifyUser(invoiceMessage, \"success\");\n    }\n\n    return function () {\n      console.log(\"Communities Unmounting\");\n    };\n  }, [invoiceUpdated, invoiceMessage, invoiceListLoading]);\n\n  var handelTableChange = function handelTableChange(_ref2, tableFilters, sorter) {\n    var current = _ref2.current;\n    console.log(tableFilters);\n\n    if (sorter && sorter.field) {\n      if (sorter.order == \"ascend\") {\n        setSort(sorter.field);\n      } else {\n        setSort(\"-\" + sorter.field);\n      }\n    }\n\n    var _filters = {};\n    Object.entries(tableFilters).forEach(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          key = _ref4[0],\n          value = _ref4[1];\n\n      var orFilter = [];\n\n      if (value) {\n        switch (key) {\n          case \"number\":\n            _filters.number = {\n              _in: value\n            };\n            break;\n\n          case \"amount\":\n            orFilter = [];\n            value.map(function (data) {\n              orFilter.push({\n                amount: {\n                  _eq: data\n                }\n              });\n            });\n            _filters._or = orFilter;\n            break;\n\n          case \"client_name\":\n            orFilter = [];\n            value.map(function (data) {\n              orFilter.push({\n                lead: {\n                  clients: {\n                    name: {\n                      _contains: data\n                    }\n                  }\n                }\n              });\n            });\n            _filters._or = orFilter;\n            break;\n\n          case \"resident_name\":\n            orFilter = [];\n            value.map(function (data) {\n              orFilter.push({\n                lead: {\n                  residents: {\n                    name: {\n                      _contains: data\n                    }\n                  }\n                }\n              });\n            });\n            _filters._or = orFilter;\n            break;\n\n          case \"status\":\n            _filters.status = {\n              _in: value\n            };\n            break;\n\n          default:\n            break;\n        }\n      } else {}\n    });\n    setFilters(_objectSpread({}, _filters));\n    setPagination(_objectSpread({}, pagination, {\n      current: current\n    }));\n    dispatch(_setInvoiceListLoading(true));\n  };\n\n  var columns = [{\n    title: 'Invoice Number',\n    dataIndex: 'number',\n    key: 'number',\n    //sorter:true,\n    sortDirections: ['ascend', 'descend', 'ascend'],\n    //...getColumnSearchProps('number'),\n    render: function render(text, invoice) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/owner/invoices/\".concat(invoice.key),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 10\n        }\n      }, text));\n    }\n  }, {\n    title: 'Client Name',\n    dataIndex: 'client_name',\n    key: 'client_name',\n    //...getColumnSearchProps('client_name'),\n    render: function render(text, invoice) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 9\n        }\n      }, text);\n    }\n  }, {\n    title: 'Resident Name',\n    dataIndex: 'resident_name',\n    key: 'resident_name',\n    //...getColumnSearchProps('resident_name'),\n    render: function render(text, invoice) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }\n      }, text);\n    }\n  }, {\n    title: 'Amount',\n    dataIndex: 'amount',\n    //sorter:true,\n    sortDirections: ['ascend', 'descend', 'ascend'],\n    //...getColumnSearchProps('amount'),\n    key: 'amount',\n    render: function render(text) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }\n      }, \"$\".concat(text));\n    }\n  }, {\n    title: 'Due Date',\n    dataIndex: 'due_date',\n    //sorter:true,\n    sortDirections: ['ascend', 'descend', 'ascend'],\n    key: 'due_date',\n    render: function render(text) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }\n      }, \"\".concat(text));\n    }\n  }, {\n    title: 'Status',\n    dataIndex: 'status',\n    key: 'status',\n    //filters:invoiceStatusOptions,\n    //sorter:true,\n    sortDirections: ['ascend', 'descend', 'ascend'],\n    render: function render(text) {\n      return /*#__PURE__*/React.createElement(Space, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Tag, {\n        color: text == \"completed\" || text == \"published\" ? \"green\" : \"red\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 15\n        }\n      }, humanize(text)));\n    }\n  }];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Breadcrumb, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }, \"Home\")), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/invoices\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, \"Invoices\"))), /*#__PURE__*/React.createElement(Row, {\n    gutter: 30,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 24,\n    lg: 24,\n    xl: 24,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    columns: columns,\n    loading: invoiceListLoading,\n    dataSource: invoiceList.map(function (_ref5) {\n      var lead = _ref5.lead,\n          amount = _ref5.amount,\n          number = _ref5.number,\n          status = _ref5.status,\n          id = _ref5.id,\n          due_date = _ref5.due_date;\n      return {\n        client_name: lead && lead.clients[0] ? lead.clients[0].name : \"\",\n        resident_name: lead && lead.residents[0] ? lead.residents[0].name : \"\",\n        amount: amount,\n        number: number,\n        key: id,\n        status: status,\n        due_date: due_date\n      };\n    }),\n    pagination: pagination,\n    onChange: handelTableChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  }))));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    invoiceList: state.invoice.invoiceList,\n    invoiceListLoading: state.invoice.invoiceListLoading,\n    invoiceListMeta: state.invoice.invoiceListMeta\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    listAllInvoices: function listAllInvoices() {\n      return dispatch(_listAllInvoices());\n    },\n    updateInvoice: function updateInvoice() {\n      return dispatch(_updateInvoice());\n    },\n    setInvoiceListLoading: function setInvoiceListLoading() {\n      return dispatch(_setInvoiceListLoading());\n    }\n  };\n}\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(ListInvoice);","map":{"version":3,"sources":["C:/xampp/htdocs/wordpress/dashboard/src/app/pages/home-owner/invoices/list-invoices.js"],"names":["React","useEffect","useState","connect","listAllInvoices","updateInvoice","setInvoiceListLoading","useDispatch","Link","notifyUser","Row","Col","Table","Tag","Space","Breadcrumb","compose","humanize","getColumnSearchProps","invoiceStatusOptions","ListInvoice","invoiceList","invoiceListLoading","invoiceMessage","invoiceUpdated","invoiceListMeta","pageSize","current","pagination","setPagination","sort","setSort","filters","setFilters","dispatch","fields","filter","page","limit","meta","total","filter_count","console","log","handelTableChange","tableFilters","sorter","field","order","_filters","Object","entries","forEach","key","value","orFilter","number","_in","map","data","push","amount","_eq","_or","lead","clients","name","_contains","residents","status","columns","title","dataIndex","sortDirections","render","text","invoice","id","due_date","client_name","resident_name","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect,useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { listAllInvoices,updateInvoice,setInvoiceListLoading } from \"../../../redux/actions/invoice-actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { notifyUser } from \"../../../services/notification-service\";\r\nimport { Row, Col,Table, Tag, Space,Breadcrumb } from \"antd\";\r\nimport { compose } from \"redux\";\r\nimport {humanize} from \"../../../helpers/string-helper\";\r\nimport { getColumnSearchProps } from \"../../../helpers/columnSearchProps\";\r\nimport { invoiceStatusOptions } from \"../../../constants/defaultValues\";\r\n\r\n\r\n  \r\n\r\nconst ListInvoice = ({ invoiceList,invoiceListLoading,invoiceMessage,invoiceUpdated,invoiceListMeta }) => {\r\n\r\n  const [pagination,setPagination] = useState({\r\n    pageSize: 5,\r\n    current:1,\r\n  });\r\n  const [sort,setSort] = useState([]);\r\n  const  [filters,setFilters] = useState({});\r\n\r\n  const dispatch = useDispatch();\r\n  \r\n  useEffect(() => {\r\n    invoiceListLoading && dispatch(listAllInvoices({fields:['*',\"lead.clients.*\",\"lead.residents.*\"],filter:filters,sort,page:pagination.current,limit:pagination.pageSize,meta:\"*\"}));\r\n    invoiceListMeta && setPagination({...pagination,total:invoiceListMeta.filter_count});\r\n    if(invoiceUpdated){\r\n        notifyUser(invoiceMessage, \"success\");\r\n    }\r\n    return () => {\r\n      console.log(\"Communities Unmounting\");\r\n    };\r\n  }, [invoiceUpdated,invoiceMessage,invoiceListLoading]);\r\n\r\n  const handelTableChange = ({current},tableFilters,sorter)=>{\r\n    console.log(tableFilters);\r\n    if(sorter && sorter.field){\r\n      if(sorter.order == \"ascend\"){\r\n        setSort(sorter.field);\r\n      }else{\r\n        setSort(\"-\"+sorter.field);\r\n      }\r\n    }\r\n\r\n    let _filters = {};\r\n\r\n\r\n    Object.entries(tableFilters).forEach(([key, value]) => {\r\n        let orFilter = [];\r\n        if(value){\r\n          switch (key) {\r\n            case \"number\":\r\n              _filters.number = {_in:value}\r\n              break;\r\n  \r\n            case \"amount\":\r\n              orFilter = [];\r\n              value.map((data)=>{orFilter.push({amount:{_eq:data}}) })\r\n              _filters._or = orFilter;\r\n              break;\r\n            \r\n            case \"client_name\":\r\n              orFilter = [];\r\n              value.map((data)=>{orFilter.push({lead:{clients:{name:{_contains:data}}}}) })\r\n              _filters._or = orFilter;\r\n              break;\r\n            case \"resident_name\":\r\n              orFilter = [];\r\n              value.map((data)=>{orFilter.push({lead:{residents:{name:{_contains:data}}}}) })\r\n              _filters._or = orFilter;\r\n              break;\r\n            case \"status\":\r\n              _filters.status = {_in:value};\r\n              break;\r\n          \r\n            default:\r\n              break;\r\n          }\r\n        }else{\r\n\r\n        }\r\n        \r\n    });\r\n    setFilters({..._filters});\r\n    setPagination({...pagination,current});\r\n    dispatch(setInvoiceListLoading(true));\r\n  }\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Invoice Number',\r\n      dataIndex: 'number',\r\n      key: 'number',\r\n      //sorter:true,\r\n      sortDirections: ['ascend','descend','ascend'],\r\n      //...getColumnSearchProps('number'),\r\n      render: (text,invoice) => (\r\n        <Space size=\"middle\">\r\n         <Link to={`/owner/invoices/${invoice.key}`}>{text}</Link> \r\n          \r\n        </Space>\r\n      )\r\n    },\r\n    {\r\n      title: 'Client Name',\r\n      dataIndex: 'client_name',\r\n      key: 'client_name',\r\n      //...getColumnSearchProps('client_name'),\r\n      render: (text,invoice) => (\r\n        <Space size=\"middle\">\r\n         {text}\r\n          \r\n        </Space>\r\n      )\r\n    },\r\n\r\n    {\r\n      title: 'Resident Name',\r\n      dataIndex: 'resident_name',\r\n      key: 'resident_name',\r\n      //...getColumnSearchProps('resident_name'),\r\n      render: (text,invoice) => (\r\n        <Space size=\"middle\">\r\n           {text} \r\n          \r\n        </Space>\r\n      )\r\n    },\r\n    \r\n\r\n    {\r\n        title: 'Amount',\r\n        dataIndex: 'amount',\r\n        //sorter:true,\r\n        sortDirections: ['ascend','descend','ascend'],\r\n        //...getColumnSearchProps('amount'),\r\n        key: 'amount',\r\n        render: (text) => (\r\n            <Space size=\"middle\">\r\n                {`$${text}`}\r\n            </Space>\r\n          )\r\n\r\n    },\r\n    \r\n    {\r\n      title: 'Due Date',\r\n      dataIndex: 'due_date',\r\n      //sorter:true,\r\n      sortDirections: ['ascend','descend','ascend'],\r\n      key: 'due_date',\r\n      render: (text) => (\r\n          <Space size=\"middle\">\r\n              {`${text}`}\r\n          </Space>\r\n        )\r\n\r\n  },\r\n  \r\n    \r\n    \r\n    {\r\n      title: 'Status',\r\n      dataIndex: 'status',\r\n      key: 'status',\r\n      //filters:invoiceStatusOptions,\r\n      //sorter:true,\r\n      sortDirections: ['ascend','descend','ascend'],\r\n      render: (text) => (\r\n        <Space >\r\n              <Tag color={text == \"completed\" || text == \"published\"?\"green\":\"red\"}>{humanize( text)}</Tag>\r\n        </Space>\r\n      )\r\n    },\r\n   \r\n    \r\n  ];\r\n  \r\n\r\n  return (\r\n    <>\r\n    <Breadcrumb>\r\n            <Breadcrumb.Item>\r\n            <Link to=\"/owner\">Home</Link>\r\n            </Breadcrumb.Item>\r\n            <Breadcrumb.Item>\r\n            <Link to=\"/owner/invoices\">Invoices</Link>\r\n            </Breadcrumb.Item>\r\n        </Breadcrumb>\r\n      <Row gutter={30}>\r\n        <Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n          <Table \r\n            columns={columns} \r\n            loading={invoiceListLoading} \r\n            dataSource={invoiceList.map(({lead,amount,number,status,id,due_date}) =>{\r\n              return {client_name:lead && lead.clients[0]?lead.clients[0].name:\"\",resident_name:lead &&lead.residents[0]?lead.residents[0].name:\"\",amount,number,key:id,status,due_date};\r\n            })}\r\n            pagination={pagination}\r\n            onChange={handelTableChange}\r\n          />\r\n        </Col>\r\n        </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    invoiceList: state.invoice.invoiceList,\r\n    invoiceListLoading: state.invoice.invoiceListLoading,\r\n    invoiceListMeta: state.invoice.invoiceListMeta,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    listAllInvoices: () => dispatch(listAllInvoices()),\r\n    updateInvoice: () => dispatch(updateInvoice()),\r\n    setInvoiceListLoading: () => dispatch(setInvoiceListLoading()),\r\n  };\r\n}\r\n\r\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(ListInvoice);\r\n"]},"metadata":{},"sourceType":"module"}