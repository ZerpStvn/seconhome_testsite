{"ast":null,"code":"import _objectSpread from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\src\\\\app\\\\pages\\\\home-owner\\\\communities\\\\staff\\\\list-staff.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { listAllStaff as _listAllStaff, setStaffListLoading as _setStaffListLoading } from \"../../../../redux/actions/staff-actions\";\nimport { useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { notifyUser } from \"../../../../services/notification-service\";\nimport { List, Divider, Row, Col, Button, PageHeader, Table, Tag, Space, Breadcrumb, Tooltip } from \"antd\";\nimport { compose } from \"redux\";\nimport { EditOutlined } from '@ant-design/icons';\nimport { getColumnSearchProps } from \"../../../../helpers/columnSearchProps\";\n\nvar ListStaff = function ListStaff(_ref) {\n  var homeId = _ref.homeId,\n      staffList = _ref.staffList,\n      staffListLoading = _ref.staffListLoading,\n      staffMessage = _ref.staffMessage,\n      staffUpdated = _ref.staffUpdated,\n      staffListMeta = _ref.staffListMeta;\n\n  var _useState = useState({\n    pageSize: 5,\n    current: 1\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      pagination = _useState2[0],\n      setPagination = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sort = _useState4[0],\n      setSort = _useState4[1];\n\n  var _useState5 = useState({\n    home: {\n      _eq: homeId\n    }\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      filters = _useState6[0],\n      setFilters = _useState6[1];\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    staffListLoading && dispatch(_listAllStaff({\n      filter: filters,\n      sort: sort,\n      page: pagination.current,\n      limit: pagination.pageSize,\n      meta: \"*\"\n    }));\n\n    if (staffUpdated) {\n      notifyUser(staffMessage, \"success\");\n    }\n\n    return function () {\n      console.log(\"Staff Unmounting\");\n    };\n  }, [staffUpdated, staffMessage, staffListLoading]);\n\n  var handelTableChange = function handelTableChange(_ref2, tableFilters, sorter) {\n    var current = _ref2.current;\n    console.log(tableFilters);\n\n    if (sorter && sorter.field) {\n      if (sorter.order == \"ascend\") {\n        setSort(sorter.field);\n      } else {\n        setSort(\"-\" + sorter.field);\n      }\n    }\n\n    var _filters = {};\n    Object.entries(tableFilters).forEach(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          key = _ref4[0],\n          value = _ref4[1];\n\n      var orFilter = [];\n\n      if (value) {\n        switch (key) {\n          case \"name\":\n            orFilter = [];\n            value.map(function (data) {\n              orFilter.push({\n                name: {\n                  _contains: data\n                }\n              });\n            });\n            _filters._or = orFilter;\n            break;\n\n          case \"email\":\n            orFilter = [];\n            value.map(function (data) {\n              orFilter.push({\n                email: {\n                  _contains: data\n                }\n              });\n            });\n            _filters._or = orFilter;\n            break;\n\n          case \"phone\":\n            orFilter = [];\n            value.map(function (data) {\n              orFilter.push({\n                phone: {\n                  _contains: data\n                }\n              });\n            });\n            _filters._or = orFilter;\n            break;\n\n          default:\n            break;\n        }\n      } else {}\n    });\n    setFilters(_objectSpread({}, _filters, {\n      home: {\n        _eq: homeId\n      }\n    }));\n    setPagination(_objectSpread({}, pagination, {\n      current: current\n    }));\n    dispatch(_setStaffListLoading(true));\n  };\n\n  var formatNumber = function formatNumber(e) {\n    if (e) {\n      var x = e.toString().replace(/\\D/g, '').match(/(\\d{0,3})(\\d{0,3})(\\d{0,4})/);\n      return !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '');\n    }\n  };\n\n  var columns = [_objectSpread({\n    title: 'Name',\n    dataIndex: 'name',\n    key: 'name',\n    sorter: true,\n    sortDirections: ['ascend', 'descend', 'ascend']\n  }, getColumnSearchProps('name'), {\n    render: function render(text, staff) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        className: \"cap-letter\",\n        to: \"/owner/communities/\".concat(homeId, \"/staff/\").concat(staff.key),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }\n      }, text));\n    }\n  }), _objectSpread({\n    title: 'Email',\n    dataIndex: 'email',\n    key: 'email',\n    sorter: true,\n    sortDirections: ['ascend', 'descend', 'ascend']\n  }, getColumnSearchProps('email'), {\n    render: function render(text, staff) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 9\n        }\n      }, text);\n    }\n  }), _objectSpread({\n    title: 'Phone',\n    dataIndex: 'phone',\n    key: 'phone',\n    sorter: true,\n    sortDirections: ['ascend', 'descend', 'ascend']\n  }, getColumnSearchProps('phone'), {\n    render: function render(text, staff) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 9\n        }\n      }, \"\".concat(formatNumber(text)));\n    }\n  }), {\n    title: 'Action',\n    key: 'action',\n    render: function render(text, staff) {\n      return /*#__PURE__*/React.createElement(Space, {\n        size: \"middle\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Tooltip, {\n        title: \"Edit\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/owner/communities/\".concat(homeId, \"/staff/\").concat(staff.key),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(EditOutlined, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 94\n        }\n      }))));\n    }\n  }];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    gutter: 30,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 24,\n    lg: 24,\n    xl: 24,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Space, {\n    style: {\n      marginBottom: 16\n    },\n    className: \"btn-group-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    href: \"/dashboard/owner/communities/\".concat(homeId, \"/staff/add\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, \"Add Staff\")), /*#__PURE__*/React.createElement(Table, {\n    columns: columns,\n    loading: staffListLoading,\n    dataSource: staffList.map(function (_ref5) {\n      var name = _ref5.name,\n          email = _ref5.email,\n          phone = _ref5.phone,\n          id = _ref5.id;\n      return {\n        name: name,\n        email: email,\n        phone: phone,\n        key: id\n      };\n    }),\n    pagination: pagination,\n    onChange: handelTableChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }))));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    staffList: state.staff.staffList,\n    staffListLoading: state.staff.staffListLoading,\n    staffListMeta: state.staff.staffListMeta\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    listAllStaff: function listAllStaff() {\n      return dispatch(_listAllStaff());\n    },\n    setStaffListLoading: function setStaffListLoading() {\n      return dispatch(_setStaffListLoading());\n    }\n  };\n}\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(ListStaff);","map":{"version":3,"sources":["C:/xampp/htdocs/wordpress/dashboard/src/app/pages/home-owner/communities/staff/list-staff.js"],"names":["React","useEffect","useState","connect","listAllStaff","setStaffListLoading","useDispatch","Link","notifyUser","List","Divider","Row","Col","Button","PageHeader","Table","Tag","Space","Breadcrumb","Tooltip","compose","EditOutlined","getColumnSearchProps","ListStaff","homeId","staffList","staffListLoading","staffMessage","staffUpdated","staffListMeta","pageSize","current","pagination","setPagination","sort","setSort","home","_eq","filters","setFilters","dispatch","filter","page","limit","meta","console","log","handelTableChange","tableFilters","sorter","field","order","_filters","Object","entries","forEach","key","value","orFilter","map","data","push","name","_contains","_or","email","phone","formatNumber","e","x","toString","replace","match","columns","title","dataIndex","sortDirections","render","text","staff","marginBottom","id","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { listAllStaff, setStaffListLoading } from \"../../../../redux/actions/staff-actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { notifyUser } from \"../../../../services/notification-service\";\r\nimport { List, Divider, Row, Col, Button, PageHeader, Table, Tag, Space, Breadcrumb, Tooltip } from \"antd\";\r\nimport { compose } from \"redux\";\r\nimport { EditOutlined } from '@ant-design/icons';\r\nimport { getColumnSearchProps } from \"../../../../helpers/columnSearchProps\";\r\n\r\nconst ListStaff = ({ homeId, staffList, staffListLoading, staffMessage, staffUpdated, staffListMeta }) => {\r\n\r\n  const [pagination, setPagination] = useState({\r\n    pageSize: 5,\r\n    current: 1,\r\n  });\r\n  const [sort, setSort] = useState([]);\r\n  const [filters, setFilters] = useState({ home: { _eq: homeId } });\r\n\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    staffListLoading && dispatch(listAllStaff({ filter: filters, sort, page: pagination.current, limit: pagination.pageSize, meta: \"*\" }));\r\n    if (staffUpdated) {\r\n      notifyUser(staffMessage, \"success\");\r\n    }\r\n    return () => {\r\n      console.log(\"Staff Unmounting\");\r\n    };\r\n  }, [staffUpdated, staffMessage, staffListLoading]);\r\n\r\n  const handelTableChange = ({ current }, tableFilters, sorter) => {\r\n    console.log(tableFilters);\r\n    if (sorter && sorter.field) {\r\n      if (sorter.order == \"ascend\") {\r\n        setSort(sorter.field);\r\n      } else {\r\n        setSort(\"-\" + sorter.field);\r\n      }\r\n    }\r\n\r\n    let _filters = {};\r\n\r\n\r\n    Object.entries(tableFilters).forEach(([key, value]) => {\r\n      let orFilter = [];\r\n      if (value) {\r\n        switch (key) {\r\n          case \"name\":\r\n            orFilter = [];\r\n            value.map((data) => { orFilter.push({ name: { _contains: data } }) })\r\n            _filters._or = orFilter;\r\n            break;\r\n          case \"email\":\r\n            orFilter = [];\r\n            value.map((data) => { orFilter.push({ email: { _contains: data } }) })\r\n            _filters._or = orFilter;\r\n            break;\r\n          case \"phone\":\r\n            orFilter = [];\r\n            value.map((data) => { orFilter.push({ phone: { _contains: data } }) })\r\n            _filters._or = orFilter;\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      } else {\r\n\r\n      }\r\n\r\n    });\r\n    setFilters({ ..._filters, home: { _eq: homeId } });\r\n    setPagination({ ...pagination, current });\r\n    dispatch(setStaffListLoading(true));\r\n  }\r\n\r\n  const formatNumber = (e) => {\r\n    if (e) {\r\n        var x = e.toString().replace(/\\D/g, '').match(/(\\d{0,3})(\\d{0,3})(\\d{0,4})/);\r\n        return !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '');\r\n\r\n    }\r\n}\r\n\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      sorter: true,\r\n      sortDirections: ['ascend', 'descend', 'ascend'],\r\n      ...getColumnSearchProps('name'),\r\n      render: (text, staff) => (\r\n        <Space size=\"middle\">\r\n          <Link className=\"cap-letter\" to={`/owner/communities/${homeId}/staff/${staff.key}`}>{text}</Link>\r\n\r\n        </Space>\r\n      )\r\n    },\r\n\r\n    {\r\n      title: 'Email',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n      sorter: true,\r\n      sortDirections: ['ascend', 'descend', 'ascend'],\r\n      ...getColumnSearchProps('email'),\r\n      render: (text, staff) => (\r\n        <Space size=\"middle\">\r\n          {text}\r\n        </Space>\r\n      )\r\n    },\r\n\r\n    {\r\n      title: 'Phone',\r\n      dataIndex: 'phone',\r\n      key: 'phone',\r\n      sorter: true,\r\n      sortDirections: ['ascend', 'descend', 'ascend'],\r\n      ...getColumnSearchProps('phone'),\r\n      render: (text, staff) => (\r\n        <Space size=\"middle\">\r\n          {`${formatNumber(text)}`}\r\n        </Space>\r\n      )\r\n\r\n    },\r\n    {\r\n      title: 'Action',\r\n      key: 'action',\r\n      render: (text, staff) => (\r\n        <Space size=\"middle\">\r\n          <Tooltip title=\"Edit\"><Link to={`/owner/communities/${homeId}/staff/${staff.key}`}><EditOutlined /></Link></Tooltip>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n  return (\r\n    <>\r\n      <Row gutter={30}>\r\n        <Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n          <Space style={{ marginBottom: 16 }} className=\"btn-group-right\">\r\n            <Button href={`/dashboard/owner/communities/${homeId}/staff/add`}>Add Staff</Button>\r\n          </Space>\r\n          <Table\r\n            columns={columns}\r\n            loading={staffListLoading}\r\n            dataSource={staffList.map(({ name, email, phone, id }) => {\r\n              return { name, email, phone, key: id };\r\n            })}\r\n            pagination={pagination}\r\n            onChange={handelTableChange}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    staffList: state.staff.staffList,\r\n    staffListLoading: state.staff.staffListLoading,\r\n    staffListMeta: state.staff.staffListMeta\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    listAllStaff: () => dispatch(listAllStaff()),\r\n    setStaffListLoading: () => dispatch(setStaffListLoading()),\r\n  };\r\n}\r\n\r\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(ListStaff);\r\n"]},"metadata":{},"sourceType":"module"}