{"ast":null,"code":"import _objectSpread from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\src\\\\app\\\\pages\\\\home-owner\\\\communities\\\\staff\\\\edit-staff.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { Row, Col, Button, Form, Input, Card, Select, Skeleton, Breadcrumb, PageHeader, DatePicker, Menu } from \"antd\";\nimport { compose } from \"redux\";\nimport Config from \"../../../../config\";\nimport { getStaffById as _getStaffById, updateStaff as _updateStaff } from \"../../../../redux/actions/staff-actions\";\nimport { staffTitles, staffCredentials, staffLanguages } from \"../../../../constants/defaultValues\";\nimport moment from 'moment';\nimport UploadPhotos from \"../../../../components/upload-photos\";\nimport fileAPI from \"../../../../redux/api/file-api\";\nimport { humanize } from \"../../../../helpers/string-helper\";\nvar TextArea = Input.TextArea;\nvar Meta = Card.Meta;\nvar viewDateFormat = 'MMM DD, YYYY';\nvar dateFormat = 'YYYY-MM-DD';\n\nvar EditStaff = function EditStaff(_ref) {\n  var editStaff = _ref.editStaff,\n      editStaffLoading = _ref.editStaffLoading,\n      history = _ref.history;\n\n  var _useParams = useParams(),\n      id = _useParams.id,\n      staffId = _useParams.staffId;\n\n  var dispatch = useDispatch();\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      photoList = _useState2[0],\n      setPhotoList = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dateStarted = _useState4[0],\n      setDateStarted = _useState4[1];\n\n  useEffect(function () {\n    if (!editStaff) {\n      dispatch(_getStaffById(staffId, {\n        fields: \"*,photos.*,photos.directus_files_id.*\"\n      }));\n    }\n\n    var _photoList = [];\n    editStaff && editStaff.photos.map(function (_ref2) {\n      var id = _ref2.id,\n          directus_files_id = _ref2.directus_files_id;\n\n      _photoList.push({\n        uid: directus_files_id.id,\n        id: id,\n        status: 'done',\n        url: \"\".concat(Config.API, \"/assets/\").concat(directus_files_id.id),\n        name: directus_files_id.filename_download\n      });\n    });\n    editStaff && setDateStarted(editStaff.start_date);\n    setPhotoList(_photoList);\n    return function () {\n      console.log(\"Edit Staff Unmounting\");\n    };\n  }, [editStaffLoading]);\n\n  var handleSave = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      var photos;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getPhotosArray();\n\n            case 2:\n              photos = _context.sent;\n              values.photos = photos;\n              values.start_date = dateStarted;\n              dispatch(_updateStaff(staffId, values));\n              history.push(\"/owner/communities/\" + id + \"/staff\");\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSave(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handelPhotoListChange = function handelPhotoListChange(_ref4) {\n    var fileList = _ref4.fileList,\n        file = _ref4.file;\n    console.log(fileList, file, photoList);\n    setPhotoList(fileList);\n  };\n\n  var getPhotosArray = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var imageIds, i, photo, response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              imageIds = [];\n              i = 0;\n\n            case 2:\n              if (!(i < photoList.length)) {\n                _context2.next = 15;\n                break;\n              }\n\n              photo = photoList[i];\n\n              if (!photo.id) {\n                _context2.next = 8;\n                break;\n              }\n\n              imageIds.push(photo.id);\n              _context2.next = 12;\n              break;\n\n            case 8:\n              _context2.next = 10;\n              return fileAPI.uploadFile(photo);\n\n            case 10:\n              response = _context2.sent;\n              imageIds.push({\n                directus_files_id: response.data.id\n              });\n\n            case 12:\n              i++;\n              _context2.next = 2;\n              break;\n\n            case 15:\n              return _context2.abrupt(\"return\", imageIds);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getPhotosArray() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Breadcrumb, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, \"Home\")), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/communities\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, \"Communities\")), /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/communities/\".concat(id, \"/staff\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, \"Staff\")), editStaff && /*#__PURE__*/React.createElement(Breadcrumb.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/communities/\".concat(id, \"/staff/\").concat(staffId),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"\".concat(humanize(editStaff.name))))), /*#__PURE__*/React.createElement(PageHeader, {\n    className: \"site-page-header\",\n    title: editStaff && \"\".concat(humanize(editStaff.name)),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Skeleton, {\n    loading: editStaffLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, editStaff && /*#__PURE__*/React.createElement(Row, {\n    gutter: 30,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 8,\n    lg: 8,\n    xl: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    hoverable: true,\n    cover: editStaff.photos[0] && /*#__PURE__*/React.createElement(\"img\", {\n      src: \"\".concat(Config.API, \"/assets/\").concat(editStaff.photos[0].directus_files_id.id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 47\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Meta, {\n    title: editStaff.name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 16,\n    lg: 16,\n    xl: 16,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Menu, {\n    selectedKeys: [\"staff\"],\n    mode: \"horizontal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"profile\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/communities/\".concat(id, \"/profile\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 19\n    }\n  }, \"Profile\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"rooms\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/communities/\".concat(id, \"/rooms\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 19\n    }\n  }, \"Rooms\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"pricing\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/communities/\".concat(id, \"/pricing\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }, \"Pricing\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"services-amenities\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/communities/\".concat(id, \"/services-amenities\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 19\n    }\n  }, \"Services & Amenities\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"photos\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/communities/\".concat(id, \"/photos\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 19\n    }\n  }, \"Photos\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"staff\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/communities/\".concat(id, \"/staff\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, \"Staff\")), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"Documents\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/owner/communities/\".concat(id, \"/documents\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 19\n    }\n  }, \"Documents\"))), /*#__PURE__*/React.createElement(Form, {\n    form: form,\n    layout: \"horizontal\",\n    onFinish: handleSave // initialValues={editStaff}\n    ,\n    initialValues: _objectSpread({}, editStaff, {\n      start_date: moment(editStaff.start_date)\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    title: \"Basic Details\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Staff Name\",\n    name: \"name\",\n    rules: [{\n      required: true,\n      message: \"Please enter Staff Name!\",\n      whitespace: true\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    maxLength: 255,\n    placeholder: \"Add Name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Staff Phone\",\n    name: \"phone\",\n    rules: [{\n      required: true,\n      pattern: /^(1\\s?)?(\\d{3}|\\(\\d{3}\\))[\\s\\-]?\\d{3}[\\s\\-]?\\d{4}$/g,\n      message: 'Please input valid number!' // max: 14\n\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Add Staff Phone\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Staff Email\",\n    name: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    maxLength: 255,\n    type: \"email\",\n    placeholder: \"Add Staff Email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Start Date\",\n    name: \"start_date\",\n    rules: [{\n      required: true,\n      message: \"Please enter valid date\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    format: viewDateFormat,\n    onChange: function onChange(date, dateString) {\n      return setDateStarted(date.format(dateFormat));\n    },\n    value: dateStarted && moment(dateStarted, dateFormat),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Staff Title\",\n    name: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }, staffTitles.map(function (_ref6) {\n    var text = _ref6.text,\n        value = _ref6.value;\n    return /*#__PURE__*/React.createElement(Select.Option, {\n      key: value,\n      value: value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, text);\n  }))), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Credentials\",\n    name: \"credentials\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 21\n    }\n  }, staffCredentials.map(function (_ref7) {\n    var text = _ref7.text,\n        value = _ref7.value;\n    return /*#__PURE__*/React.createElement(Select.Option, {\n      key: value,\n      value: value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 25\n      }\n    }, text);\n  }))), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Languages\",\n    name: \"languages\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    mode: \"multiple\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }\n  }, staffLanguages.map(function (_ref8) {\n    var text = _ref8.text,\n        value = _ref8.value;\n    return /*#__PURE__*/React.createElement(Select.Option, {\n      key: value,\n      value: value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 25\n      }\n    }, text);\n  }))), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Biography\",\n    name: \"biography\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    placeholder: \"Add Biography\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Card, {\n    title: \"Photos\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(UploadPhotos, {\n    photoList: photoList,\n    handelPhotoListChange: handelPhotoListChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 19\n    }\n  }, \"Save\")))))));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    editStaff: state.staff.editStaff,\n    editStaffLoading: state.staff.editStaffLoading\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getStaffById: function getStaffById() {\n      return dispatch(_getStaffById());\n    },\n    updateStaff: function updateStaff() {\n      return dispatch(_updateStaff());\n    }\n  };\n}\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(EditStaff);","map":{"version":3,"sources":["C:/xampp/htdocs/wordpress/dashboard/src/app/pages/home-owner/communities/staff/edit-staff.js"],"names":["React","useEffect","useState","connect","useDispatch","Link","useParams","Row","Col","Button","Form","Input","Card","Select","Skeleton","Breadcrumb","PageHeader","DatePicker","Menu","compose","Config","getStaffById","updateStaff","staffTitles","staffCredentials","staffLanguages","moment","UploadPhotos","fileAPI","humanize","TextArea","Meta","viewDateFormat","dateFormat","EditStaff","editStaff","editStaffLoading","history","id","staffId","dispatch","useForm","form","photoList","setPhotoList","dateStarted","setDateStarted","fields","_photoList","photos","map","directus_files_id","push","uid","status","url","API","name","filename_download","start_date","console","log","handleSave","values","getPhotosArray","handelPhotoListChange","fileList","file","imageIds","i","length","photo","uploadFile","response","data","required","message","whitespace","pattern","date","dateString","format","text","value","mapStateToProps","state","staff","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { Row, Col, Button, Form, Input, Card, Select, Skeleton, Breadcrumb, PageHeader, DatePicker, Menu } from \"antd\";\r\nimport { compose } from \"redux\";\r\nimport Config from \"../../../../config\";\r\nimport { getStaffById, updateStaff } from \"../../../../redux/actions/staff-actions\";\r\nimport { staffTitles, staffCredentials, staffLanguages } from \"../../../../constants/defaultValues\";\r\nimport moment from 'moment';\r\nimport UploadPhotos from \"../../../../components/upload-photos\";\r\nimport fileAPI from \"../../../../redux/api/file-api\";\r\nimport { humanize } from \"../../../../helpers/string-helper\";\r\n\r\nconst { TextArea } = Input;\r\nconst { Meta } = Card;\r\n\r\nconst viewDateFormat = 'MMM DD, YYYY';\r\nconst dateFormat = 'YYYY-MM-DD';\r\n\r\n\r\n\r\n\r\n\r\nconst EditStaff = ({ editStaff, editStaffLoading, history }) => {\r\n  const { id, staffId } = useParams();\r\n  const dispatch = useDispatch();\r\n  const [form] = Form.useForm();\r\n  const [photoList, setPhotoList] = useState([]);\r\n  const [dateStarted, setDateStarted] = useState('');\r\n\r\n\r\n  useEffect(() => {\r\n    if (!editStaff) {\r\n      dispatch(getStaffById(staffId, { fields: \"*,photos.*,photos.directus_files_id.*\" }));\r\n    }\r\n\r\n    let _photoList = [];\r\n\r\n    editStaff && editStaff.photos.map(({ id, directus_files_id }) => {\r\n      _photoList.push({\r\n        uid: directus_files_id.id,\r\n        id: id,\r\n        status: 'done',\r\n        url: `${Config.API}/assets/${directus_files_id.id}`,\r\n        name: directus_files_id.filename_download\r\n      })\r\n    })\r\n\r\n    editStaff && setDateStarted(editStaff.start_date)\r\n    setPhotoList(_photoList)\r\n    return () => {\r\n      console.log(\"Edit Staff Unmounting\");\r\n    };\r\n  }, [editStaffLoading]);\r\n\r\n  const handleSave = async (values) => {\r\n    const photos = await getPhotosArray();\r\n    values.photos = photos;\r\n    values.start_date = dateStarted;\r\n    dispatch(updateStaff(staffId, values))\r\n    history.push(\"/owner/communities/\" + id + \"/staff\")\r\n  };\r\n\r\n\r\n  const handelPhotoListChange = ({ fileList, file }) => {\r\n    console.log(fileList, file, photoList)\r\n    setPhotoList(fileList)\r\n  }\r\n\r\n  const getPhotosArray = async () => {\r\n    let imageIds = [];\r\n    for (let i = 0; i < photoList.length; i++) {\r\n      let photo = photoList[i];\r\n      if (photo.id) {\r\n        imageIds.push(photo.id)\r\n      } else {\r\n        const response = await fileAPI.uploadFile(photo);\r\n        imageIds.push({ directus_files_id: response.data.id })\r\n      }\r\n    }\r\n    return imageIds;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      <Breadcrumb>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/owner\">Home</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item>\r\n          <Link to=\"/owner/communities\">Communities</Link>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item>\r\n          <Link to={`/owner/communities/${id}/staff`}>Staff</Link>\r\n        </Breadcrumb.Item>\r\n        {editStaff && (\r\n          <Breadcrumb.Item>\r\n            <Link to={`/owner/communities/${id}/staff/${staffId}`}>{`${humanize(editStaff.name)}`}</Link>\r\n          </Breadcrumb.Item>\r\n        )}\r\n      </Breadcrumb>\r\n      <PageHeader className=\"site-page-header\" title={editStaff && `${humanize(editStaff.name)}`} />\r\n      <Skeleton loading={editStaffLoading}>\r\n        {editStaff && (\r\n\r\n          <Row gutter={30}>\r\n            <Col xs={24} sm={24} md={8} lg={8} xl={8}>\r\n\r\n              <Card\r\n                hoverable\r\n                cover={editStaff.photos[0] && <img src={`${Config.API}/assets/${editStaff.photos[0].directus_files_id.id}`} />}\r\n              >\r\n                <Meta title={editStaff.name} />\r\n              </Card>\r\n            </Col>\r\n            <Col xs={24} sm={24} md={16} lg={16} xl={16}>\r\n              <Menu selectedKeys={[\"staff\"]} mode=\"horizontal\">\r\n                <Menu.Item key=\"profile\" >\r\n                  <Link to={`/owner/communities/${id}/profile`}>Profile</Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"rooms\">\r\n                  <Link to={`/owner/communities/${id}/rooms`}>Rooms</Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"pricing\">\r\n                  <Link to={`/owner/communities/${id}/pricing`}>Pricing</Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"services-amenities\" >\r\n                  <Link to={`/owner/communities/${id}/services-amenities`}>Services & Amenities</Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"photos\" >\r\n                  <Link to={`/owner/communities/${id}/photos`}>Photos</Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"staff\" >\r\n                  <Link to={`/owner/communities/${id}/staff`}>Staff</Link>\r\n                </Menu.Item>\r\n                <Menu.Item key=\"Documents\" >\r\n                  <Link to={`/owner/communities/${id}/documents`}>Documents</Link>\r\n                </Menu.Item>\r\n              </Menu>\r\n\r\n              <Form\r\n                form={form}\r\n                layout={\"horizontal\"}\r\n                onFinish={handleSave}\r\n                // initialValues={editStaff}\r\n                initialValues={{ ...editStaff, start_date: moment(editStaff.start_date) }}\r\n\r\n              >\r\n                <Card\r\n                  title=\"Basic Details\"\r\n                >\r\n                  <Form.Item\r\n                    label=\"Staff Name\"\r\n                    name=\"name\"\r\n                    rules={[\r\n                      {\r\n                        required: true,\r\n                        message: \"Please enter Staff Name!\",\r\n                        whitespace: true,\r\n                      },\r\n                    ]}\r\n                  >\r\n                    <Input\r\n                      maxLength={255}\r\n\r\n                      placeholder=\"Add Name\"\r\n                    />\r\n                  </Form.Item>\r\n                  <Form.Item label=\"Staff Phone\" name=\"phone\" rules={[\r\n                    {\r\n                      required: true,\r\n                      pattern: /^(1\\s?)?(\\d{3}|\\(\\d{3}\\))[\\s\\-]?\\d{3}[\\s\\-]?\\d{4}$/g,\r\n                      message: 'Please input valid number!',\r\n                      // max: 14\r\n                    },\r\n                  ]}>\r\n                    <Input placeholder=\"Add Staff Phone\" />\r\n                  </Form.Item>\r\n                  <Form.Item label=\"Staff Email\" name=\"email\" >\r\n                    <Input maxLength={255} type=\"email\" placeholder=\"Add Staff Email\" />\r\n                  </Form.Item>\r\n                  <Form.Item label=\"Start Date\" name=\"start_date\" rules={[\r\n                    {\r\n                      required: true,\r\n                      message: \"Please enter valid date\",\r\n                    }\r\n                  ]}>\r\n                    <DatePicker format={viewDateFormat} onChange={(date, dateString) => setDateStarted(date.format(dateFormat))} value={dateStarted && moment(dateStarted, dateFormat)} />\r\n                  </Form.Item>\r\n                  <Form.Item label=\"Staff Title\" name=\"title\" >\r\n                    <Select >\r\n                      {staffTitles.map(({ text, value }) =>\r\n                        <Select.Option key={value} value={value}>{text}</Select.Option>\r\n                      )}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item label=\"Credentials\" name=\"credentials\" >\r\n                    <Select >\r\n                      {staffCredentials.map(({ text, value }) =>\r\n                        <Select.Option key={value} value={value}>{text}</Select.Option>\r\n                      )}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item label=\"Languages\" name=\"languages\" >\r\n                    <Select mode=\"multiple\" >\r\n                      {staffLanguages.map(({ text, value }) =>\r\n                        <Select.Option key={value} value={value}>{text}</Select.Option>\r\n                      )}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item label=\"Biography\" name=\"biography\" >\r\n                    <TextArea placeholder=\"Add Biography\" />\r\n                  </Form.Item>\r\n                  {/* <Form.Item label=\"Status\" name=\"status\" >\r\n                    <Select  >\r\n                      <Select.Option value=\"published\">Published</Select.Option>\r\n                      <Select.Option value=\"draft\">Draft</Select.Option>\r\n                    </Select>\r\n                  </Form.Item> */}\r\n                </Card>\r\n                <Card\r\n                  title=\"Photos\"\r\n                >\r\n                  <UploadPhotos photoList={photoList} handelPhotoListChange={handelPhotoListChange} />\r\n                </Card>\r\n\r\n                <Form.Item>\r\n                  <Button type=\"primary\" htmlType=\"submit\">\r\n                    Save\r\n                  </Button>\r\n                </Form.Item>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n\r\n\r\n        )}\r\n      </Skeleton>\r\n\r\n\r\n\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    editStaff: state.staff.editStaff,\r\n    editStaffLoading: state.staff.editStaffLoading\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    getStaffById: () => dispatch(getStaffById()),\r\n    updateStaff: () => dispatch(updateStaff()),\r\n  };\r\n}\r\n\r\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(EditStaff);\r\n"]},"metadata":{},"sourceType":"module"}