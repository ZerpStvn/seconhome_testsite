{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _toConsumableArray from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\wordpress\\\\dashboard\\\\src\\\\app\\\\pages\\\\home-owner\\\\communities\\\\edit-community-documents.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { notifyUser } from \"../../../services/notification-service\";\nimport { List, Divider, Row, Col, Button, Tabs, Form, Input, Card, Image, Select } from \"antd\";\nimport { compose } from \"redux\";\nimport { identity } from \"ramda\";\nimport Config from \"../../../config\";\nimport { homeDocumentsCategories } from \"../../../constants/defaultValues\";\nimport { useForm } from \"../../../constants/use-form\";\nimport UploadDocuments from \"../../../components/upload-documents\";\nimport camelCase from \"camel-case\";\nimport fileAPI from \"../../../redux/api/file-api\";\nvar TabPane = Tabs.TabPane;\nvar TextArea = Input.TextArea;\nvar Meta = Card.Meta;\n\nvar EditCommunityDocuments = function EditCommunityDocuments(_ref) {\n  var editHome = _ref.editHome,\n      documentList = _ref.documentList,\n      handleSave = _ref.handleSave;\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      importantDocuments = _useState2[0],\n      setImportantDocuments = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      marketingMaterials = _useState4[0],\n      setMarketingMaterials = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      licenseCertificate = _useState6[0],\n      setLicenseCertificate = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  useEffect(function () {\n    var _importantDocuments = [];\n    var _marketingMaterials = [];\n    var _licenseCertificate = [];\n    documentList.map(function (document) {\n      switch (document.category) {\n        case \"Important Documents\":\n          _importantDocuments.push(document);\n\n          break;\n\n        case \"Marketing Materials\":\n          _marketingMaterials.push(document);\n\n          break;\n\n        case \"License Certificate\":\n          _licenseCertificate.push(document);\n\n          break;\n\n        default:\n          break;\n      }\n    });\n    setImportantDocuments(_importantDocuments);\n    setMarketingMaterials(_marketingMaterials);\n    setLicenseCertificate(_licenseCertificate);\n    return function () {\n      console.log(\"Edit Communities Profile Unmounting\");\n    };\n  }, [documentList]);\n\n  var handelDocumentChange = function handelDocumentChange(_ref2, category) {\n    var fileList = _ref2.fileList;\n\n    switch (category) {\n      case \"Important Documents\":\n        setImportantDocuments(fileList);\n        break;\n\n      case \"Marketing Materials\":\n        setMarketingMaterials(fileList);\n        break;\n\n      case \"License Certificate\":\n        setLicenseCertificate(fileList);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  var handleDocumentsSave = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      var _documents, licenseCertificateIds, marketingMaterialsIds, importantDocumentsIds;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _documents = [];\n              licenseCertificateIds = [];\n              marketingMaterialsIds = [];\n              importantDocumentsIds = [];\n              _context.next = 7;\n              return getFilesArray(importantDocuments, \"Important Documents\");\n\n            case 7:\n              importantDocumentsIds = _context.sent;\n              _context.next = 10;\n              return getFilesArray(marketingMaterials, \"Marketing Materials\");\n\n            case 10:\n              marketingMaterialsIds = _context.sent;\n              _context.next = 13;\n              return getFilesArray(licenseCertificate, \"License Certificate\");\n\n            case 13:\n              licenseCertificateIds = _context.sent;\n              _documents = [].concat(_toConsumableArray(importantDocumentsIds), _toConsumableArray(marketingMaterialsIds), _toConsumableArray(licenseCertificateIds));\n              handleSave(editHome.id, {\n                documents: _documents\n              });\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleDocumentsSave(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var getFilesArray = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fileList, category) {\n      var fileIds, i, file, response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              fileIds = [];\n              i = 0;\n\n            case 2:\n              if (!(i < fileList.length)) {\n                _context2.next = 15;\n                break;\n              }\n\n              file = fileList[i];\n\n              if (!file.id) {\n                _context2.next = 8;\n                break;\n              }\n\n              fileIds.push(file.id);\n              _context2.next = 12;\n              break;\n\n            case 8:\n              _context2.next = 10;\n              return fileAPI.uploadFile(file);\n\n            case 10:\n              response = _context2.sent;\n              fileIds.push({\n                directus_files_id: response.data.id,\n                category: category\n              });\n\n            case 12:\n              i++;\n              _context2.next = 2;\n              break;\n\n            case 15:\n              return _context2.abrupt(\"return\", fileIds);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getFilesArray(_x2, _x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    gutter: 30,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 8,\n    lg: 8,\n    xl: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    hoverable: true //cover={<img  src={`${Config.API}/assets/${editHome.image}`} />}\n    ,\n    className: \"home-main-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Meta, {\n    title: editHome.name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 16,\n    lg: 16,\n    xl: 16,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    form: form,\n    layout: \"horizontal\",\n    onFinish: function onFinish(values) {\n      return handleDocumentsSave(values);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    title: \"Important Documents\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UploadDocuments, {\n    multiple: true,\n    documentList: importantDocuments,\n    handelDocumentListChange: handelDocumentChange,\n    category: \"Important Documents\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Card, {\n    title: \"Marketing Materials\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UploadDocuments, {\n    multiple: true,\n    documentList: marketingMaterials,\n    handelDocumentListChange: handelDocumentChange,\n    category: \"Marketing Materials\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Card, {\n    title: \"License Certificate\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UploadDocuments, {\n    multiple: true,\n    documentList: licenseCertificate,\n    handelDocumentListChange: handelDocumentChange,\n    category: \"License Certificate\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    loading: loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, \"Save\"))))));\n};\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {};\n}\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(EditCommunityDocuments);","map":{"version":3,"sources":["C:/xampp/htdocs/wordpress/dashboard/src/app/pages/home-owner/communities/edit-community-documents.js"],"names":["React","useEffect","useState","connect","useDispatch","Link","useParams","notifyUser","List","Divider","Row","Col","Button","Tabs","Form","Input","Card","Image","Select","compose","identity","Config","homeDocumentsCategories","useForm","UploadDocuments","camelCase","fileAPI","TabPane","TextArea","Meta","EditCommunityDocuments","editHome","documentList","handleSave","form","importantDocuments","setImportantDocuments","marketingMaterials","setMarketingMaterials","licenseCertificate","setLicenseCertificate","loading","setLoading","_importantDocuments","_marketingMaterials","_licenseCertificate","map","document","category","push","console","log","handelDocumentChange","fileList","handleDocumentsSave","values","_documents","licenseCertificateIds","marketingMaterialsIds","importantDocumentsIds","getFilesArray","id","documents","fileIds","i","length","file","uploadFile","response","directus_files_id","data","name","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { notifyUser } from \"../../../services/notification-service\";\r\nimport { List, Divider, Row, Col, Button, Tabs, Form, Input, Card, Image, Select } from \"antd\";\r\nimport { compose } from \"redux\";\r\nimport { identity } from \"ramda\";\r\nimport Config from \"../../../config\";\r\nimport { homeDocumentsCategories } from \"../../../constants/defaultValues\";\r\nimport { useForm } from \"../../../constants/use-form\";\r\nimport UploadDocuments from \"../../../components/upload-documents\";\r\nimport camelCase from \"camel-case\";\r\nimport fileAPI from \"../../../redux/api/file-api\";\r\n\r\nconst { TabPane } = Tabs;\r\nconst { TextArea } = Input;\r\nconst { Meta } = Card;\r\n\r\n\r\n\r\nconst EditCommunityDocuments = ({ editHome, documentList, handleSave }) => {\r\n  const [form] = Form.useForm();\r\n  const [importantDocuments, setImportantDocuments] = useState([]);\r\n  const [marketingMaterials, setMarketingMaterials] = useState([]);\r\n  const [licenseCertificate, setLicenseCertificate] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let _importantDocuments = []\r\n    let _marketingMaterials = []\r\n    let _licenseCertificate = []\r\n\r\n    documentList.map((document) => {\r\n      switch (document.category) {\r\n        case \"Important Documents\":\r\n          _importantDocuments.push(document)\r\n          break;\r\n        case \"Marketing Materials\":\r\n          _marketingMaterials.push(document)\r\n          break;\r\n        case \"License Certificate\":\r\n          _licenseCertificate.push(document)\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    })\r\n    setImportantDocuments(_importantDocuments);\r\n    setMarketingMaterials(_marketingMaterials);\r\n    setLicenseCertificate(_licenseCertificate);\r\n\r\n    return () => {\r\n      console.log(\"Edit Communities Profile Unmounting\");\r\n    };\r\n  }, [documentList]);\r\n\r\n\r\n\r\n  const handelDocumentChange = ({ fileList }, category) => {\r\n    switch (category) {\r\n      case \"Important Documents\":\r\n        setImportantDocuments(fileList)\r\n        break;\r\n      case \"Marketing Materials\":\r\n        setMarketingMaterials(fileList)\r\n        break;\r\n      case \"License Certificate\":\r\n        setLicenseCertificate(fileList)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n  const handleDocumentsSave = async (values) => {\r\n    setLoading(true)\r\n    let _documents = [];\r\n    let licenseCertificateIds = [];\r\n    let marketingMaterialsIds = [];\r\n    let importantDocumentsIds = [];\r\n\r\n    importantDocumentsIds = await getFilesArray(importantDocuments, \"Important Documents\");\r\n    marketingMaterialsIds = await getFilesArray(marketingMaterials, \"Marketing Materials\");\r\n    licenseCertificateIds = await getFilesArray(licenseCertificate, \"License Certificate\");\r\n\r\n    _documents = [...importantDocumentsIds, ...marketingMaterialsIds, ...licenseCertificateIds]\r\n    handleSave(editHome.id, { documents: _documents });\r\n  }\r\n\r\n\r\n  const getFilesArray = async (fileList, category) => {\r\n    let fileIds = [];\r\n    for (let i = 0; i < fileList.length; i++) {\r\n      let file = fileList[i];\r\n      if (file.id) {\r\n        fileIds.push(file.id)\r\n      } else {\r\n        const response = await fileAPI.uploadFile(file);\r\n        fileIds.push({ directus_files_id: response.data.id, category })\r\n      }\r\n    }\r\n    return fileIds;\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n\r\n      <Row gutter={30}>\r\n        <Col xs={24} sm={24} md={8} lg={8} xl={8}>\r\n          <Card\r\n            hoverable\r\n            //cover={<img  src={`${Config.API}/assets/${editHome.image}`} />}\r\n            className=\"home-main-title\"\r\n          >\r\n            <Meta title={editHome.name} />\r\n          </Card>\r\n        </Col>\r\n        <Col xs={24} sm={24} md={16} lg={16} xl={16}>\r\n          <Form\r\n            form={form}\r\n            layout={\"horizontal\"}\r\n            onFinish={(values) => handleDocumentsSave(values)}\r\n          >\r\n            <Card title=\"Important Documents\">\r\n              <UploadDocuments multiple documentList={importantDocuments} handelDocumentListChange={handelDocumentChange} category=\"Important Documents\" />\r\n            </Card>\r\n            <Card title=\"Marketing Materials\">\r\n              <UploadDocuments multiple documentList={marketingMaterials} handelDocumentListChange={handelDocumentChange} category=\"Marketing Materials\" />\r\n            </Card>\r\n            <Card title=\"License Certificate\">\r\n              <UploadDocuments multiple documentList={licenseCertificate} handelDocumentListChange={handelDocumentChange} category=\"License Certificate\" />\r\n            </Card>\r\n            <Form.Item>\r\n              <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n                Save\r\n              </Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n\r\n\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n\r\n  };\r\n}\r\n\r\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(EditCommunityDocuments);\r\n"]},"metadata":{},"sourceType":"module"}